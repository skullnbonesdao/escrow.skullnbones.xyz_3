import{X as U,I as L,K as T,D as j,L as h,Y as y,C as M,k as W,M as Y}from"./QTable.28dc1341.js";import{d as R,c as X}from"./QTab.0e5674d5.js";import{u as H,t as Q,y as z,z as C,H as G,ab as f,bC as I,a4 as v,bI as N,ak as _,$ as s,v as P,bX as q,aj as r,w as A,a5 as O,a6 as n,aa as o,a7 as t,ap as S,a8 as p,bK as V,ae as J,a9 as $,ai as D}from"./index.5e163a79.js";var b=H({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(a,{slots:c}){const l=G(),u=Q(()=>"q-td"+(a.autoWidth===!0?" q-table--col-auto-width":"")+(a.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(a.props===void 0)return z("td",{class:u.value},C(c.default));const k=l.vnode.key,m=(a.props.colsMap!==void 0?a.props.colsMap[k]:null)||a.props.col;if(m===void 0)return;const{row:w}=a.props;return z("td",{class:u.value+m.__tdClass(w),style:m.__tdStyle(w)},C(c.default))}}}),Z=H({name:"QTr",props:{props:Object,noHover:Boolean},setup(a,{slots:c}){const l=Q(()=>"q-tr"+(a.props===void 0||a.props.header===!0?"":" "+a.props.__trClass)+(a.noHover===!0?" q-tr--no-hover":""));return()=>z("tr",{class:l.value},C(c.default))}});function g(a){var c;return a?((c=f().token_list.find(l=>l.address==a))==null?void 0:c.logoURI)??"unknown.png":"unknown.png"}function E(a){var c;return(c=f().token_list.find(l=>l.address==a))==null?void 0:c.name}const ee={class:"text-body1"},K=I({__name:"FormatTokenNumber",props:["mint","amount"],setup(a){const c=a,l=Q(()=>{var u;return{debug:!1,masked:!1,prefix:"",suffix:"",thousands:",",decimal:".",precision:((u=f().token_list.find(k=>k.address==c.mint))==null?void 0:u.decimals)??0,disableNegative:!0,disabled:!1,min:null,max:null,allowBlank:!1,minimumNumberOfCharacters:0,modelModifiers:{number:!1},shouldRound:!0,focusOnRight:!1}});return(u,k)=>(v(),N("p",ee,_(s(U)(c.amount,l.value)),1))}}),te={class:"row full-width items-center q-gutter-x-md"},se=o("div",{class:"text-subtitle1"},"Sort by:",-1),oe={class:"q-gutter-y-xs"},ae={class:"row items-center justify-around no-wrap"},ne={class:"q-mx-sm text-subtitle1"},ce={class:"row items-center justify-around no-wrap"},re={class:"q-mx-sm text-subtitle1"},le={class:"q-gutter-y-xs"},ie={class:"row items-center justify-end q-gutter-x-sm no-wrap"},ue={class:"row items-center justify-end q-gutter-x-sm no-wrap"},de={class:"q-gutter-y-xs"},_e={class:"row items-center justify-end q-gutter-x-sm no-wrap"},me={class:"text-subtitle2"},we={class:"row items-center justify-end q-gutter-x-sm no-wrap"},fe={class:"text-subtitle2"},ke={class:"row items-center",style:{width:"100px"}},he={class:"col"},ge={class:"col"},be={class:"col"},ve={class:"col"},ye={key:0,class:"row items-center justify-around q-gutter-sm"},pe={key:1,class:"col text-center"},F=9,Se=I({__name:"EscrowTable",setup(a){P("buy_name");const c=q().path,l=[{name:"tokens",label:"Tokens",align:"center"},{name:"size",label:"Size",align:"center"},{name:"ppu",label:"Price per Unit",align:"center"},{name:"states",label:"",align:"center"},{name:"actions",label:"",align:"center"}],u=P(r().escrows);A(()=>r().escrow_selected,()=>u.value=r().escrows_filtered);function k(m){if(r().escrow_selected==m){f().showRightDrawer=!1,r().escrow_selected=void 0;return}r().escrow_selected=m,c.includes("exchange")&&(f().showRightDrawer=!0)}return(m,w)=>{var B;return(B=s(r)().escrows_filtered)!=null&&B.length?(v(),O(L,{key:0,class:"full-width",flat:"",square:"",bordered:"",rows:s(r)().escrows_filtered,columns:l,"row-key":"name","hide-bottom":"",pagination:{rowsPerPage:0}},{top:n(()=>[o("div",te,[t(T,{class:"col"}),se,o("div",null,[t(X,{modelValue:s(r)().sort_direction,"onUpdate:modelValue":w[0]||(w[0]=e=>s(r)().sort_direction=e),dense:"",align:"justify",breakpoint:0},{default:n(()=>[t(R,{name:"buy_ppu","no-caps":"",label:"Buy Price"}),t(R,{name:"sell_ppu","no-caps":"",label:"Sell Price"})]),_:1},8,["modelValue"])])])]),body:n(e=>[t(Z,{props:e,onClick:i=>k(e.row)},{default:n(()=>[t(b,{key:"tokens",props:e},{default:n(()=>[o("div",oe,[o("div",ae,[t(j,{label:"SELL",color:"red",outline:""}),t(T),o("div",ne,_(s(E)(e.row.account.requestToken)),1),t(h,{size:"sm",src:s(g)(e.row.account.requestToken)},null,8,["src"])]),o("div",ce,[t(j,{label:"BUY",color:"green",outline:""}),t(T),o("div",re,_(s(E)(e.row.account.depositToken)),1),t(h,{size:"sm",src:s(g)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(b,{key:"size",props:e},{default:n(()=>{var i,d;return[o("div",le,[o("div",ie,[t(K,{mint:e.row.account.requestToken,amount:e.row.account.tokensDepositRemaining.toNumber()*e.row.account.price*10**-((i=s(f)().token_list.find(x=>x.address==e.row.account.depositToken))==null?void 0:i.decimals)},null,8,["mint","amount"]),t(h,{size:"sm",src:s(g)(e.row.account.requestToken)},null,8,["src"])]),o("div",ue,[t(K,{mint:e.row.account.depositToken,amount:e.row.account.tokensDepositRemaining.toNumber()*10**-((d=s(f)().token_list.find(x=>x.address==e.row.account.depositToken))==null?void 0:d.decimals)},null,8,["mint","amount"]),t(h,{size:"sm",src:s(g)(e.row.account.depositToken)},null,8,["src"])])])]}),_:2},1032,["props"]),t(b,{key:"ppu",props:e},{default:n(()=>[o("div",de,[o("div",_e,[o("div",me,_(e.row.account.price.toFixed(F)),1),t(h,{size:"sm",src:s(g)(e.row.account.requestToken)},null,8,["src"])]),o("div",we,[o("div",fe,_((1/e.row.account.price).toFixed(F)),1),t(h,{size:"sm",src:s(g)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(b,{key:"states",props:e},{default:n(()=>{var i;return[o("div",ke,[o("div",he,[t(S,{size:"sm",name:"balance",color:e.row.account.allowPartialFill?"purple":"grey"},{default:n(()=>[t(y,null,{default:n(()=>[p("Partial fill "+_(e.row.account.allowPartialFill?"":"NOT ")+" allowed",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",ge,[t(S,{size:"sm",name:"timer",color:e.row.account.expireTimestamp>0?"orange":"grey"},{default:n(()=>[t(y,null,{default:n(()=>[p("Will "+_(e.row.account.expireTimestamp>0?"":"NOT ")+" expire",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",be,[t(S,{size:"sm",name:"design_services",color:e.row.account.maker.toString()==((i=s(V)().publicKey.value)==null?void 0:i.toString())?"orange":"grey"},{default:n(()=>[t(y,null,{default:n(()=>{var d;return[p("You are "+_(e.row.account.maker.toString()===((d=s(V)().publicKey.value)==null?void 0:d.toString())?"":"NOT ")+" the creator",1)]}),_:2},1024)]),_:2},1032,["color"])]),o("div",ve,[t(M,{size:"xs",escrow:e.row},null,8,["escrow"])])])]}),_:2},1032,["props"]),t(b,{key:"actions",props:e},{default:n(()=>{var i;return[s(q)().path!="/exchange"||s(J)().screen.lt.md?(v(),N("div",ye,[t($,{to:"/details/"+((i=s(r)().escrow_selected)==null?void 0:i.publicKey.toString()),dense:"",color:"secondary",icon:"aspect_ratio"},{default:n(()=>[t(y,null,{default:n(()=>[p("Expand offer")]),_:1})]),_:1},8,["to"]),t($,{dense:"",onClick:w[1]||(w[1]=()=>{var d;s(W)("https://escrow.skullnbones.xyz/#/details/"+((d=s(r)().escrow_selected)==null?void 0:d.publicKey.toString()))}),color:"secondary",icon:"share"}),s(q)().path.includes("manage")?(v(),O(Y,{key:0})):D("",!0)])):D("",!0)]}),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows"])):(v(),N("h5",pe,"No Escrows found"))}}});export{Se as _};
