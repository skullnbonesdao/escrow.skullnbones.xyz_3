import{W as U,v as W,A as p,p as j,B as f,X as T,_ as I,C as K}from"./QTable.e105f44b.js";import{u as L,a as M,b as A,c as X}from"./QTabs.4814639d.js";import{u as B,t as Q,y as z,z as S,H as Y,ab as m,az as F,a4 as g,aA as H,ak as d,$ as a,v as C,bX as P,aj as l,w as G,a5 as R,a6 as r,aa as o,a7 as t,ap as x,a8 as q,aB as O,a9 as J,ai as Z}from"./index.a51f012c.js";var V=B({name:"QTab",props:L,emits:M,setup(s,{slots:n,emit:c}){const{renderTab:i}=A(s,n,c);return()=>i("div")}}),v=B({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(s,{slots:n}){const c=Y(),i=Q(()=>"q-td"+(s.autoWidth===!0?" q-table--col-auto-width":"")+(s.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(s.props===void 0)return z("td",{class:i.value},S(n.default));const w=c.vnode.key,_=(s.props.colsMap!==void 0?s.props.colsMap[w]:null)||s.props.col;if(_===void 0)return;const{row:h}=s.props;return z("td",{class:i.value+_.__tdClass(h),style:_.__tdStyle(h)},S(n.default))}}}),ee=B({name:"QTr",props:{props:Object,noHover:Boolean},setup(s,{slots:n}){const c=Q(()=>"q-tr"+(s.props===void 0||s.props.header===!0?"":" "+s.props.__trClass)+(s.noHover===!0?" q-tr--no-hover":""));return()=>z("tr",{class:c.value},S(n.default))}});function b(s){var n;return s?((n=m().token_list.find(c=>c.address==s))==null?void 0:n.logoURI)??"unknown.png":"unknown.png"}function $(s){var n;return(n=m().token_list.find(c=>c.address==s))==null?void 0:n.name}const te={class:"text-body1"},E=F({__name:"FormatTokenNumber",props:["mint","amount"],setup(s){const n=s,c=Q(()=>{var i;return{debug:!1,masked:!1,prefix:"",suffix:"",thousands:",",decimal:".",precision:((i=m().token_list.find(w=>w.address==n.mint))==null?void 0:i.decimals)??0,disableNegative:!0,disabled:!1,min:null,max:null,allowBlank:!1,minimumNumberOfCharacters:0,modelModifiers:{number:!1},shouldRound:!0,focusOnRight:!1}});return(i,w)=>(g(),H("p",te,d(a(U)(n.amount,c.value)),1))}}),se={class:"row full-width items-center q-gutter-x-md"},oe=o("div",{class:"text-subtitle1"},"Sort by:",-1),ae={class:"q-gutter-y-xs"},ne={class:"row items-center justify-around no-wrap"},re={class:"q-mx-sm text-subtitle1"},ce={class:"row items-center justify-around no-wrap"},le={class:"q-mx-sm text-subtitle1"},ie={class:"q-gutter-y-xs"},ue={class:"row items-center justify-end q-gutter-x-sm no-wrap"},de={class:"row items-center justify-end q-gutter-x-sm no-wrap"},_e={class:"q-gutter-y-xs"},me={class:"row items-center justify-end q-gutter-x-sm no-wrap"},we={class:"text-subtitle2"},fe={class:"row items-center justify-end q-gutter-x-sm no-wrap"},be={class:"text-subtitle2"},he={class:"row items-center"},ke={class:"col"},ve={class:"col"},ge={class:"col"},ye={class:"col"},pe={class:"row items-center justify-around q-gutter-sm"},Te={key:1,class:"col text-center"},D=9,Se=F({__name:"EscrowTable",setup(s){C("buy_name");const n=P().path,c=[{name:"tokens",label:"Tokens",align:"center"},{name:"size",label:"Size",align:"center"},{name:"ppu",label:"Price per Unit",align:"center"},{name:"states",label:"",align:"center"},{name:"actions",label:"",align:"center"}],i=C(l().escrows);G(()=>l().escrow_selected,()=>i.value=l().escrows_filtered);function w(_){if(l().escrow_selected==_){m().showRightDrawer=!1,l().escrow_selected=void 0;return}l().escrow_selected=_,n.includes("exchange")&&(m().showRightDrawer=!0)}return(_,h)=>{var N;return(N=a(l)().escrows_filtered)!=null&&N.length?(g(),R(W,{key:0,class:"full-width",flat:"",square:"",bordered:"",rows:a(l)().escrows_filtered,columns:c,"row-key":"name","hide-bottom":"",pagination:{rowsPerPage:0}},{top:r(()=>[o("div",se,[t(p,{class:"col"}),oe,o("div",null,[t(X,{modelValue:a(l)().sort_direction,"onUpdate:modelValue":h[0]||(h[0]=e=>a(l)().sort_direction=e),dense:"",align:"justify",breakpoint:0},{default:r(()=>[t(V,{name:"buy_ppu","no-caps":"",label:"Buy Price"}),t(V,{name:"sell_ppu","no-caps":"",label:"Sell Price"})]),_:1},8,["modelValue"])])])]),body:r(e=>[t(ee,{props:e,onClick:u=>w(e.row)},{default:r(()=>[t(v,{key:"tokens",props:e},{default:r(()=>[o("div",ae,[o("div",ne,[t(j,{label:"SELL",color:"red",outline:""}),t(p),o("div",re,d(a($)(e.row.account.requestToken)),1),t(f,{size:"sm",src:a(b)(e.row.account.requestToken)},null,8,["src"])]),o("div",ce,[t(j,{label:"BUY",color:"green",outline:""}),t(p),o("div",le,d(a($)(e.row.account.depositToken)),1),t(f,{size:"sm",src:a(b)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(v,{key:"size",props:e},{default:r(()=>{var u,k;return[o("div",ie,[o("div",ue,[t(E,{mint:e.row.account.requestToken,amount:e.row.account.tokensDepositRemaining.toNumber()*e.row.account.price*10**-((u=a(m)().token_list.find(y=>y.address==e.row.account.depositToken))==null?void 0:u.decimals)},null,8,["mint","amount"]),t(f,{size:"sm",src:a(b)(e.row.account.requestToken)},null,8,["src"])]),o("div",de,[t(E,{mint:e.row.account.depositToken,amount:e.row.account.tokensDepositRemaining.toNumber()*10**-((k=a(m)().token_list.find(y=>y.address==e.row.account.depositToken))==null?void 0:k.decimals)},null,8,["mint","amount"]),t(f,{size:"sm",src:a(b)(e.row.account.depositToken)},null,8,["src"])])])]}),_:2},1032,["props"]),t(v,{key:"ppu",props:e},{default:r(()=>[o("div",_e,[o("div",me,[o("div",we,d(e.row.account.price.toFixed(D)),1),t(f,{size:"sm",src:a(b)(e.row.account.requestToken)},null,8,["src"])]),o("div",fe,[o("div",be,d((1/e.row.account.price).toFixed(D)),1),t(f,{size:"sm",src:a(b)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(v,{key:"states",props:e},{default:r(()=>{var u;return[o("div",he,[o("div",ke,[t(x,{size:"sm",name:"balance",color:e.row.account.allowPartialFill?"purple":"grey"},{default:r(()=>[t(T,null,{default:r(()=>[q("Partial fill "+d(e.row.account.allowPartialFill?"":"NOT ")+" allowed",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",ve,[t(x,{size:"sm",name:"timer",color:e.row.account.expireTimestamp>0?"orange":"grey"},{default:r(()=>[t(T,null,{default:r(()=>[q("Will "+d(e.row.account.expireTimestamp>0?"":"NOT ")+" expire",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",ge,[t(x,{size:"sm",name:"design_services",color:e.row.account.maker.toString()==((u=a(O)().publicKey.value)==null?void 0:u.toString())?"orange":"grey"},{default:r(()=>[t(T,null,{default:r(()=>{var k;return[q("You are "+d(e.row.account.maker.toString()===((k=a(O)().publicKey.value)==null?void 0:k.toString())?"":"NOT ")+" the creator",1)]}),_:2},1024)]),_:2},1032,["color"])]),o("div",ye,[t(I,{size:"xs",escrow:e.row},null,8,["escrow"])])])]}),_:2},1032,["props"]),t(v,{key:"actions",props:e},{default:r(()=>{var u;return[o("div",pe,[t(J,{to:"/details/"+((u=a(l)().escrow_selected)==null?void 0:u.publicKey.toString()),dense:"",color:"secondary",icon:"keyboard_double_arrow_right"},null,8,["to"]),a(P)().path.includes("manage")?(g(),R(K,{key:0})):Z("",!0)])]}),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows"])):(g(),H("h5",Te,"No Escrows found"))}}});export{V as Q,Se as _};
