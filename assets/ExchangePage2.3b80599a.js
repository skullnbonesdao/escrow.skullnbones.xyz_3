import{e as j,J as N,K as le,T as ae,_ as O,E as B,q as V,F as Pe,H as Qe,C as De,n as oe,G as I,I as ve,A as Oe}from"./QTable.e7966c06.js";import{u as Me,a as Re,Q as U,b as Ae}from"./QCard.9d777299.js";import{Q as re}from"./QResizeObserver.047b93bc.js";import{Q as He,_ as je}from"./FilterEscrows2.5a83e5ae.js";import{u as Be,v as f,t as m,bO as Ee,w as Fe,at as Ne,au as Ve,x as Ie,y as p,R as Le,K as se,H as Ue,a7 as Y,ad as G,b_ as me,bj as fe,a0 as h,a8 as Q,a9 as K,b$ as he,ah as ne,a3 as o,a2 as s,a6 as i,aa as _,a1 as w,ab as u,ar as C,a4 as E,bb as ie,af as g,al as F,am as T,a5 as Ke,I as Ye}from"./index.2c9c85b9.js";import{Q as Ge}from"./QPage.c5c9d97a.js";import{Q as D,g as M}from"./QTd.3b974a17.js";import{f as We}from"./format_address.20184662.js";const ce=["vertical","horizontal"],L={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},ue={prevent:!0,mouse:!0,mouseAllDir:!0},de=n=>n>=250?50:Math.ceil(n/5);var Je=Be({name:"QScrollArea",props:{...Me,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(n,{slots:k,emit:P}){const z=f(!1),d=f(!1),b=f(!1),r={vertical:f(0),horizontal:f(0)},e={vertical:{ref:f(null),position:f(0),size:f(0)},horizontal:{ref:f(null),position:f(0),size:f(0)}},{proxy:l}=Ue(),v=Re(n,l.$q);let y=null,q;const S=f(null),be=m(()=>"q-scrollarea"+(v.value===!0?" q-scrollarea--dark":""));e.vertical.percentage=m(()=>{const t=e.vertical.size.value-r.vertical.value;if(t<=0)return 0;const a=j(e.vertical.position.value/t,0,1);return Math.round(a*1e4)/1e4}),e.vertical.thumbHidden=m(()=>(n.visible===null?b.value:n.visible)!==!0&&z.value===!1&&d.value===!1||e.vertical.size.value<=r.vertical.value+1),e.vertical.thumbStart=m(()=>e.vertical.percentage.value*(r.vertical.value-e.vertical.thumbSize.value)),e.vertical.thumbSize=m(()=>Math.round(j(r.vertical.value*r.vertical.value/e.vertical.size.value,de(r.vertical.value),r.vertical.value))),e.vertical.style=m(()=>({...n.thumbStyle,...n.verticalThumbStyle,top:`${e.vertical.thumbStart.value}px`,height:`${e.vertical.thumbSize.value}px`})),e.vertical.thumbClass=m(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.vertical.barClass=m(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),e.horizontal.percentage=m(()=>{const t=e.horizontal.size.value-r.horizontal.value;if(t<=0)return 0;const a=j(Math.abs(e.horizontal.position.value)/t,0,1);return Math.round(a*1e4)/1e4}),e.horizontal.thumbHidden=m(()=>(n.visible===null?b.value:n.visible)!==!0&&z.value===!1&&d.value===!1||e.horizontal.size.value<=r.horizontal.value+1),e.horizontal.thumbStart=m(()=>e.horizontal.percentage.value*(r.horizontal.value-e.horizontal.thumbSize.value)),e.horizontal.thumbSize=m(()=>Math.round(j(r.horizontal.value*r.horizontal.value/e.horizontal.size.value,de(r.horizontal.value),r.horizontal.value))),e.horizontal.style=m(()=>({...n.thumbStyle,...n.horizontalThumbStyle,[l.$q.lang.rtl===!0?"right":"left"]:`${e.horizontal.thumbStart.value}px`,width:`${e.horizontal.thumbSize.value}px`})),e.horizontal.thumbClass=m(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.horizontal.barClass=m(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const _e=m(()=>e.vertical.thumbHidden.value===!0&&e.horizontal.thumbHidden.value===!0?n.contentStyle:n.contentActiveStyle),ge=[[ae,t=>{Z(t,"vertical")},void 0,{vertical:!0,...ue}]],ze=[[ae,t=>{Z(t,"horizontal")},void 0,{horizontal:!0,...ue}]];function W(){const t={};return ce.forEach(a=>{const c=e[a];t[a+"Position"]=c.position.value,t[a+"Percentage"]=c.percentage.value,t[a+"Size"]=c.size.value,t[a+"ContainerSize"]=r[a].value}),t}const J=Ee(()=>{const t=W();t.ref=l,P("scroll",t)},0);function X(t,a,c){if(ce.includes(t)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(t==="vertical"?le:N)(S.value,a,c)}function ye({height:t,width:a}){let c=!1;r.vertical.value!==t&&(r.vertical.value=t,c=!0),r.horizontal.value!==a&&(r.horizontal.value=a,c=!0),c===!0&&R()}function Se({position:t}){let a=!1;e.vertical.position.value!==t.top&&(e.vertical.position.value=t.top,a=!0),e.horizontal.position.value!==t.left&&(e.horizontal.position.value=t.left,a=!0),a===!0&&R()}function we({height:t,width:a}){e.horizontal.size.value!==a&&(e.horizontal.size.value=a,R()),e.vertical.size.value!==t&&(e.vertical.size.value=t,R())}function Z(t,a){const c=e[a];if(t.isFirst===!0){if(c.thumbHidden.value===!0)return;q=c.position.value,d.value=!0}else if(d.value!==!0)return;t.isFinal===!0&&(d.value=!1);const $=L[a],H=r[a].value,$e=(c.size.value-H)/(H-c.thumbSize.value),Ce=t.distance[$.dist],Te=q+(t.direction===$.dir?1:-1)*Ce*$e;te(Te,a)}function ee(t,a){const c=e[a];if(c.thumbHidden.value!==!0){const $=t[L[a].offset];if($<c.thumbStart.value||$>c.thumbStart.value+c.thumbSize.value){const H=$-c.thumbSize.value/2;te(H/r[a].value*c.size.value,a)}c.ref.value!==null&&c.ref.value.dispatchEvent(new MouseEvent(t.type,t))}}function pe(t){ee(t,"vertical")}function ke(t){ee(t,"horizontal")}function R(){z.value=!0,y!==null&&clearTimeout(y),y=setTimeout(()=>{y=null,z.value=!1},n.delay),n.onScroll!==void 0&&J()}function te(t,a){S.value[L[a].scroll]=t}let x=null;function qe(){x!==null&&clearTimeout(x),x=setTimeout(()=>{x=null,b.value=!0},l.$q.platform.is.ios?50:0)}function xe(){x!==null&&(clearTimeout(x),x=null),b.value=!1}let A=null;return Fe(()=>l.$q.lang.rtl,t=>{S.value!==null&&N(S.value,Math.abs(e.horizontal.position.value)*(t===!0?-1:1))}),Ne(()=>{A={top:e.vertical.position.value,left:e.horizontal.position.value}}),Ve(()=>{if(A===null)return;const t=S.value;t!==null&&(N(t,A.left),le(t,A.top))}),Ie(J.cancel),Object.assign(l,{getScrollTarget:()=>S.value,getScroll:W,getScrollPosition:()=>({top:e.vertical.position.value,left:e.horizontal.position.value}),getScrollPercentage:()=>({top:e.vertical.percentage.value,left:e.horizontal.percentage.value}),setScrollPosition:X,setScrollPercentage(t,a,c){X(t,a*(e[t].size.value-r[t].value)*(t==="horizontal"&&l.$q.lang.rtl===!0?-1:1),c)}}),()=>p("div",{class:be.value,onMouseenter:qe,onMouseleave:xe},[p("div",{ref:S,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:n.tabindex!==void 0?n.tabindex:void 0},[p("div",{class:"q-scrollarea__content absolute",style:_e.value},Le(k.default,[p(re,{debounce:0,onResize:we})])),p(He,{axis:"both",onScroll:Se})]),p(re,{debounce:0,onResize:ye}),p("div",{class:e.vertical.barClass.value,style:[n.barStyle,n.verticalBarStyle],"aria-hidden":"true",onMousedown:pe}),p("div",{class:e.horizontal.barClass.value,style:[n.barStyle,n.horizontalBarStyle],"aria-hidden":"true",onMousedown:ke}),se(p("div",{ref:e.vertical.ref,class:e.vertical.thumbClass.value,style:e.vertical.style.value,"aria-hidden":"true"}),ge),se(p("div",{ref:e.horizontal.ref,class:e.horizontal.thumbClass.value,style:e.horizontal.style.value,"aria-hidden":"true"}),ze)])}});const Xe={class:"row"},Ze={class:"col"},et={class:"col q-gutter-y-sm items-center"},tt={class:"col q-gutter-y-sm"},lt={class:"row items-center q-gutter-x-xs justify-end"},at={class:"row items-center q-gutter-x-xs justify-end"},ot={class:"row items-center",style:{width:"100px"}},rt={class:"col"},st={class:"col"},nt={class:"col"},it={class:"col"},ct={class:"col"},ut=Y({__name:"EscrowCardInner",props:["groupValue","groupKey"],setup(n){const k=f(G().screen.lt.md),P=me().path,z=fe();function d(b){if(k.value)z.push(`/details/${b.publicKey.toString()}`);else{if(T().escrow_selected==b){g().showRightDrawer=!1,T().escrow_selected=void 0;return}T().escrow_selected=b,P.includes("exchange")&&(g().showRightDrawer=!0)}}return(b,r)=>(h(),Q("div",{class:ne(["q-pa-md",k.value?"col q-gutter-y-sm":"row q-gutter-x-sm"])},[(h(),Q(K,null,he(["buy","sell"],e=>o(U,{flat:"",bordered:"",square:"",class:"col q-pa-none",key:e},{default:s(()=>[i("div",Xe,[i("div",{class:ne(["col q-pa-md text-bold text-center","bg-"+e])},_(e.toUpperCase()),3)]),n.groupValue[e]?(h(),w(Qe,{key:0,flat:"","hide-bottom":"","rows-per-page-options":[0],rows:n.groupValue[e],columns:[{name:"info",align:"left",label:"Pair",field:"account",sortable:!1},{name:"symbol",align:"left",label:"",field:"account",format:(l,v)=>{var y,q;return`${((y=u(g)().token_list.find(S=>S.address==l.requestToken.toString()))==null?void 0:y.symbol)+"/"+((q=u(g)().token_list.find(S=>S.address==l.depositToken.toString()))==null?void 0:q.symbol)}`},sortable:!1},{name:"escrow",label:"Escrow",align:"left",field:"publicKey",format:(l,v)=>u(We)(`${l}`,2),sortable:!0},{name:"options",align:"left",label:"Options",field:"account",sortable:!1},{name:"volume",label:"Size",field:"account",format:(l,v)=>`${l}`,sort:(l,v,y,q)=>parseInt(l.tokensDepositRemaining.toString(),10)-parseInt(v.tokensDepositRemaining.toString(),10),sortable:!0},{name:"price",label:"Price per Unit",field:"account",sort:(l,v,y,q)=>parseFloat(l.price.toString())-parseFloat(v.price.toString()),format:(l,v)=>`${l.price.toString()}`,sortable:!0}]},{"body-cell":s(l=>[l.col.name=="info"?(h(),w(D,{key:0,props:l,onClick:v=>d(l.row)},{default:s(()=>[i("div",Ze,[i("div",et,[o(O,{size:"sm",src:u(M)(l.row.account.requestToken)},null,8,["src"]),o(C,{name:"chevron_right"}),o(O,{size:"sm",src:u(M)(l.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props","onClick"])):l.col.name=="price"?(h(),w(D,{key:1,props:l,onClick:v=>d(l.row)},{default:s(()=>[i("div",tt,[i("div",lt,[i("div",null,_(u(B)(parseFloat(l.value),5)),1),o(O,{class:"",size:"xs",src:u(M)(l.row.account.requestToken.toString())},null,8,["src"])]),i("div",at,[i("div",null,_(u(B)(1/parseFloat(l.value),5)),1),o(O,{class:"",size:"xs",src:u(M)(l.row.account.depositToken.toString())},null,8,["src"])])])]),_:2},1032,["props","onClick"])):l.col.name=="options"?(h(),w(D,{key:2,onClick:v=>d(l.row),props:l},{default:s(()=>{var v;return[i("div",ot,[i("div",rt,[o(C,{size:"sm",name:"balance",color:l.row.account.allowPartialFill?"purple":"grey"},{default:s(()=>[o(V,null,{default:s(()=>[E("Partial fill "+_(l.row.account.allowPartialFill?"":"NOT ")+" allowed",1)]),_:2},1024)]),_:2},1032,["color"])]),i("div",st,[o(C,{size:"sm",name:"timer",color:l.row.account.expireTimestamp>0?"orange":"grey"},{default:s(()=>[o(V,null,{default:s(()=>[E("Will "+_(l.row.account.expireTimestamp>0?"":"NOT ")+" expire",1)]),_:2},1024)]),_:2},1032,["color"])]),i("div",nt,[o(C,{size:"sm",name:"design_services",color:l.row.account.maker.toString()==((v=u(ie)().publicKey.value)==null?void 0:v.toString())?"orange":"grey"},{default:s(()=>[o(V,null,{default:s(()=>{var y;return[E("You are "+_(l.row.account.maker.toString()===((y=u(ie)().publicKey.value)==null?void 0:y.toString())?"":"NOT ")+" the creator",1)]}),_:2},1024)]),_:2},1032,["color"])]),i("div",it,[o(Pe,{size:"xs",escrow:l.row},null,8,["escrow"])])])]}),_:2},1032,["onClick","props"])):l.col.name=="volume"?(h(),w(D,{key:3,onClick:v=>d(l.row),props:l},{default:s(()=>[i("div",ct,[i("div",null,_(u(B)(l.row.account.price*l.row.account.tokensDepositRemaining*10**-u(g)().token_list.find(v=>v.address==l.row.account.depositToken).decimals,1)),1),i("div",null,_(u(B)(l.row.account.tokensDepositRemaining*10**-u(g)().token_list.find(v=>v.address==l.row.account.depositToken).decimals,1)),1)])]),_:2},1032,["onClick","props"])):(h(),w(D,{key:4,props:l,onClick:v=>d(l.row)},{default:s(()=>[E(_(l.value),1)]),_:2},1032,["props","onClick"]))]),_:2},1032,["rows","columns"])):F("",!0)]),_:2},1024)),64))],2))}}),dt={key:0,class:"q-mt-xs q-gutter-y-xs"},vt={style:{width:"100px"},class:"row items-center q-gutter-x-sm"},mt={class:"col q-gutter-y-xs"},ft={class:"text-white"},ht={class:"row items-center q-gutter-x-sm"},bt={class:"col text-h6 text-left"},_t={class:"q-gutter-x-xs"},gt={key:1,class:"col text-center"},zt=i("h5",null,"No Escrows found",-1),yt=i("h6",null,"You may need to check your filter settings",-1),St=[zt,yt],wt=Y({__name:"EscrowCards2",setup(n){f("buy_name"),f(G().screen.lt.md),me().path,fe();const k=m(()=>T().escrows_cards);return(P,z)=>(h(),Q(K,null,[o(U,{flat:"",square:""},{default:s(()=>[o(Ae,{class:"row q-gutter-x-sm"},{default:s(()=>[u(g)().showLeftDrawer==!1?(h(),w(Ke,{key:0,flat:"",square:"",icon:"chevron_right",onClick:z[0]||(z[0]=d=>u(g)().showLeftDrawer=!0)})):F("",!0),o(De,{class:"col",filled:"",square:"",debounce:"500",label:"Search",placeholder:"Name | Symbol",modelValue:u(T)().filter_cards.filter_string,"onUpdate:modelValue":z[1]||(z[1]=d=>u(T)().filter_cards.filter_string=d)},{append:s(()=>[o(C,{name:"search"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),Object.keys(u(T)().escrows_cards).length?(h(),Q("div",dt,[(h(!0),Q(K,null,he(Object.entries(k.value),([d,b])=>(h(),w(U,{square:"",flat:"",key:d},{default:s(()=>[o(ve,null,{header:s(()=>[o(oe,{avatar:"",class:"row items-center q-gutter-x-sm"},{default:s(()=>[o(I,{color:"transparent",outline:"",class:"col text-center q-pa-sm bg-primary"},{default:s(()=>{var r;return[i("div",vt,[i("div",mt,[o(O,{class:"",size:"sm",src:u(M)((r=u(g)().token_list.find(e=>e.symbol==d))==null?void 0:r.address)},null,8,["src"]),i("div",ft,_(d),1)])])]}),_:2},1024)]),_:2},1024),o(oe,null,{default:s(()=>{var r;return[i("div",ht,[i("div",bt,_((r=u(g)().token_list.find(e=>e.symbol==d))==null?void 0:r.name),1),i("div",_t,[o(I,{color:"buy"},{default:s(()=>[o(C,{name:"tag"}),i("div",null,_(b.buy.length),1)]),_:2},1024),o(I,{color:"sell"},{default:s(()=>[o(C,{name:"tag"}),i("div",null,_(b.sell.length),1)]),_:2},1024)])])]}),_:2},1024)]),default:s(()=>[o(ut,{"group-key":d,"group-value":b},null,8,["group-key","group-value"])]),_:2},1024)]),_:2},1024))),128))])):(h(),Q("div",gt,St))],64))}});const Qt=Y({__name:"ExchangePage2",setup(n){Ye(()=>{g().showLeftDrawer=!0,g().showRightDrawer=!1});const k=f({right:"2px",borderRadius:"9px",backgroundColor:"none",width:"8px",opacity:.2}),P=f({right:"0px",borderRadius:"0px",backgroundColor:"#888",width:"5px",opacity:1});return(z,d)=>(h(),w(Ge,{class:"row"},{default:s(()=>[o(Je,{"thumb-style":P.value,"bar-style":k.value,visible:"",class:"col"},{default:s(()=>[u(G)().screen.lt.md?(h(),w(Oe,{key:0,bordered:"",class:"bg-dark"},{default:s(()=>[o(ve,{"expand-separator":"",icon:"search",label:"Filters"},{default:s(()=>[o(je)]),_:1})]),_:1})):F("",!0),u(g)().is_init?(h(),w(wt,{key:1})):F("",!0)]),_:1},8,["thumb-style","bar-style"])]),_:1}))}});export{Qt as default};
