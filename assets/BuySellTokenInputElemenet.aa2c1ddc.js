import{N as ce,q as me,O as ve,P as ge,R as he,S as ke,U as ne,V as xe,W as ye,X as Q,L as we,w as Me,_ as be,Y as Ce}from"./QTable.8e6145b9.js";import{v as q,w as R,J as Z,ao as Se,t as A,u as pe,x as Fe,I as _e,y as Y,bs as Re,H as Ve,bj as le,bC as re,a4 as J,a5 as ee,a6 as te,bF as de,a7 as ae,aa as z,ak as ie,ai as Ae,a8 as Ee}from"./index.0d9eea0a.js";const oe={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},W={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},fe=Object.keys(W);fe.forEach(e=>{W[e].regex=new RegExp(W[e].pattern)});const Te=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+fe.join("")+"])|(.)","g"),ue=/[.*+?^${}()|[\]\\]/g,M=String.fromCharCode(1),Ne={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Oe(e,C,g,S){let o,u,p,w,h,f;const k=q(null),d=q(F());function K(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}R(()=>e.type+e.autogrow,U),R(()=>e.mask,l=>{if(l!==void 0)P(d.value,!0);else{const a=E(d.value);U(),e.modelValue!==a&&C("update:modelValue",a)}}),R(()=>e.fillMask+e.reverseFillMask,()=>{k.value===!0&&P(d.value,!0)}),R(()=>e.unmaskedValue,()=>{k.value===!0&&P(d.value)});function F(){if(U(),k.value===!0){const l=$(E(e.modelValue));return e.fillMask!==!1?H(l):l}return e.modelValue}function B(l){if(l<o.length)return o.slice(-l);let a="",i=o;const n=i.indexOf(M);if(n>-1){for(let r=l-i.length;r>0;r--)a+=M;i=i.slice(0,n)+a+i.slice(n)}return i}function U(){if(k.value=e.mask!==void 0&&e.mask.length!==0&&K(),k.value===!1){w=void 0,o="",u="";return}const l=oe[e.mask]===void 0?e.mask:oe[e.mask],a=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",i=a.replace(ue,"\\$&"),n=[],r=[],s=[];let y=e.reverseFillMask===!0,c="",m="";l.replace(Te,(b,t,x,N,T)=>{if(N!==void 0){const _=W[N];s.push(_),m=_.negate,y===!0&&(r.push("(?:"+m+"+)?("+_.pattern+"+)?(?:"+m+"+)?("+_.pattern+"+)?"),y=!1),r.push("(?:"+m+"+)?("+_.pattern+")?")}else if(x!==void 0)c="\\"+(x==="\\"?"":x),s.push(x),n.push("([^"+c+"]+)?"+c+"?");else{const _=t!==void 0?t:T;c=_==="\\"?"\\\\\\\\":_.replace(ue,"\\\\$&"),s.push(_),n.push("([^"+c+"]+)?"+c+"?")}});const j=new RegExp("^"+n.join("")+"("+(c===""?".":"[^"+c+"]")+"+)?"+(c===""?"":"["+c+"]*")+"$"),I=r.length-1,v=r.map((b,t)=>t===0&&e.reverseFillMask===!0?new RegExp("^"+i+"*"+b):t===I?new RegExp("^"+b+"("+(m===""?".":m)+"+)?"+(e.reverseFillMask===!0?"$":i+"*")):new RegExp("^"+b));p=s,w=b=>{const t=j.exec(e.reverseFillMask===!0?b:b.slice(0,s.length+1));t!==null&&(b=t.slice(1).join(""));const x=[],N=v.length;for(let T=0,_=b;T<N;T++){const D=v[T].exec(_);if(D===null)break;_=_.slice(D.shift().length),x.push(...D)}return x.length!==0?x.join(""):b},o=s.map(b=>typeof b=="string"?b:M).join(""),u=o.split(M).join(a)}function P(l,a,i){const n=S.value,r=n.selectionEnd,s=n.value.length-r,y=E(l);a===!0&&U();const c=$(y),m=e.fillMask!==!1?H(c):c,j=d.value!==m;n.value!==m&&(n.value=m),j===!0&&(d.value=m),document.activeElement===n&&Z(()=>{if(m===u){const v=e.reverseFillMask===!0?u.length:0;n.setSelectionRange(v,v,"forward");return}if(i==="insertFromPaste"&&e.reverseFillMask!==!0){const v=n.selectionEnd;let b=r-1;for(let t=h;t<=b&&t<v;t++)o[t]!==M&&b++;V.right(n,b);return}if(["deleteContentBackward","deleteContentForward"].indexOf(i)>-1){const v=e.reverseFillMask===!0?r===0?m.length>c.length?1:0:Math.max(0,m.length-(m===u?0:Math.min(c.length,s)+1))+1:r;n.setSelectionRange(v,v,"forward");return}if(e.reverseFillMask===!0)if(j===!0){const v=Math.max(0,m.length-(m===u?0:Math.min(c.length,s+1)));v===1&&r===1?n.setSelectionRange(v,v,"forward"):V.rightReverse(n,v)}else{const v=m.length-s;n.setSelectionRange(v,v,"backward")}else if(j===!0){const v=Math.max(0,o.indexOf(M),Math.min(c.length,r)-1);V.right(n,v)}else{const v=r-1;V.right(n,v)}});const I=e.unmaskedValue===!0?E(m):m;String(e.modelValue)!==I&&(e.modelValue!==null||I!=="")&&g(I,!0)}function X(l,a,i){const n=$(E(l.value));a=Math.max(0,o.indexOf(M),Math.min(n.length,a)),h=a,l.setSelectionRange(a,i,"forward")}const V={left(l,a){const i=o.slice(a-1).indexOf(M)===-1;let n=Math.max(0,a-1);for(;n>=0;n--)if(o[n]===M){a=n,i===!0&&a++;break}if(n<0&&o[a]!==void 0&&o[a]!==M)return V.right(l,0);a>=0&&l.setSelectionRange(a,a,"backward")},right(l,a){const i=l.value.length;let n=Math.min(i,a+1);for(;n<=i;n++)if(o[n]===M){a=n;break}else o[n-1]===M&&(a=n);if(n>i&&o[a-1]!==void 0&&o[a-1]!==M)return V.left(l,i);l.setSelectionRange(a,a,"forward")},leftReverse(l,a){const i=B(l.value.length);let n=Math.max(0,a-1);for(;n>=0;n--)if(i[n-1]===M){a=n;break}else if(i[n]===M&&(a=n,n===0))break;if(n<0&&i[a]!==void 0&&i[a]!==M)return V.rightReverse(l,0);a>=0&&l.setSelectionRange(a,a,"backward")},rightReverse(l,a){const i=l.value.length,n=B(i),r=n.slice(0,a+1).indexOf(M)===-1;let s=Math.min(i,a+1);for(;s<=i;s++)if(n[s-1]===M){a=s,a>0&&r===!0&&a--;break}if(s>i&&n[a-1]!==void 0&&n[a-1]!==M)return V.leftReverse(l,i);l.setSelectionRange(a,a,"forward")}};function G(l){C("click",l),f=void 0}function L(l){if(C("keydown",l),Se(l)===!0||l.altKey===!0)return;const a=S.value,i=a.selectionStart,n=a.selectionEnd;if(l.shiftKey||(f=void 0),l.keyCode===37||l.keyCode===39){l.shiftKey&&f===void 0&&(f=a.selectionDirection==="forward"?i:n);const r=V[(l.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(l.preventDefault(),r(a,f===i?n:i),l.shiftKey){const s=a.selectionStart;a.setSelectionRange(Math.min(f,s),Math.max(f,s),"forward")}}else l.keyCode===8&&e.reverseFillMask!==!0&&i===n?(V.left(a,i),a.setSelectionRange(a.selectionStart,n,"backward")):l.keyCode===46&&e.reverseFillMask===!0&&i===n&&(V.rightReverse(a,n),a.setSelectionRange(i,a.selectionEnd,"forward"))}function $(l){if(l==null||l==="")return"";if(e.reverseFillMask===!0)return O(l);const a=p;let i=0,n="";for(let r=0;r<a.length;r++){const s=l[i],y=a[r];if(typeof y=="string")n+=y,s===y&&i++;else if(s!==void 0&&y.regex.test(s))n+=y.transform!==void 0?y.transform(s):s,i++;else return n}return n}function O(l){const a=p,i=o.indexOf(M);let n=l.length-1,r="";for(let s=a.length-1;s>=0&&n>-1;s--){const y=a[s];let c=l[n];if(typeof y=="string")r=y+r,c===y&&n--;else if(c!==void 0&&y.regex.test(c))do r=(y.transform!==void 0?y.transform(c):c)+r,n--,c=l[n];while(i===s&&c!==void 0&&y.regex.test(c));else return r}return r}function E(l){return typeof l!="string"||w===void 0?typeof l=="number"?w(""+l):l:w(l)}function H(l){return u.length-l.length<=0?l:e.reverseFillMask===!0&&l.length!==0?u.slice(0,-l.length)+l:l+u.slice(l.length)}return{innerValue:d,hasMask:k,moveCursorForPaste:X,updateMaskValue:P,onMaskedKeydown:L,onMaskedClick:G}}function Ie(e,C){function g(){const S=e.modelValue;try{const o="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(S)===S&&("length"in S?Array.from(S):[S]).forEach(u=>{o.items.add(u)}),{files:o.files}}catch{return{files:void 0}}}return C===!0?A(()=>{if(e.type==="file")return g()}):A(g)}var Be=pe({name:"QInput",inheritAttrs:!1,props:{...ce,...Ne,...me,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ve,"paste","change","keydown","click","animationend"],setup(e,{emit:C,attrs:g}){const{proxy:S}=Ve(),{$q:o}=S,u={};let p=NaN,w,h,f=null,k;const d=q(null),K=ge(e),{innerValue:F,hasMask:B,moveCursorForPaste:U,updateMaskValue:P,onMaskedKeydown:X,onMaskedClick:V}=Oe(e,C,c,d),G=Ie(e,!0),L=A(()=>ne(F.value)),$=ye(s),O=he(),E=A(()=>e.type==="textarea"||e.autogrow===!0),H=A(()=>E.value===!0||["text","search","url","tel","password"].includes(e.type)),l=A(()=>{const t={...O.splitAttrs.listeners.value,onInput:s,onPaste:r,onChange:j,onBlur:I,onFocus:le};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=$,B.value===!0&&(t.onKeydown=X,t.onClick=V),e.autogrow===!0&&(t.onAnimationend=y),t}),a=A(()=>{const t={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:K.value,...O.splitAttrs.attributes.value,id:O.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return E.value===!1&&(t.type=e.type),e.autogrow===!0&&(t.rows=1),t});R(()=>e.type,()=>{d.value&&(d.value.value=e.modelValue)}),R(()=>e.modelValue,t=>{if(B.value===!0){if(h===!0&&(h=!1,String(t)===p))return;P(t)}else F.value!==t&&(F.value=t,e.type==="number"&&u.hasOwnProperty("value")===!0&&(w===!0?w=!1:delete u.value));e.autogrow===!0&&Z(m)}),R(()=>e.autogrow,t=>{t===!0?Z(m):d.value!==null&&g.rows>0&&(d.value.style.height="auto")}),R(()=>e.dense,()=>{e.autogrow===!0&&Z(m)});function i(){xe(()=>{const t=document.activeElement;d.value!==null&&d.value!==t&&(t===null||t.id!==O.targetUid.value)&&d.value.focus({preventScroll:!0})})}function n(){d.value!==null&&d.value.select()}function r(t){if(B.value===!0&&e.reverseFillMask!==!0){const x=t.target;U(x,x.selectionStart,x.selectionEnd)}C("paste",t)}function s(t){if(!t||!t.target)return;if(e.type==="file"){C("update:modelValue",t.target.files);return}const x=t.target.value;if(t.target.qComposing===!0){u.value=x;return}if(B.value===!0)P(x,!1,t.inputType);else if(c(x),H.value===!0&&t.target===document.activeElement){const{selectionStart:N,selectionEnd:T}=t.target;N!==void 0&&T!==void 0&&Z(()=>{t.target===document.activeElement&&x.indexOf(t.target.value)===0&&t.target.setSelectionRange(N,T)})}e.autogrow===!0&&m()}function y(t){C("animationend",t),m()}function c(t,x){k=()=>{f=null,e.type!=="number"&&u.hasOwnProperty("value")===!0&&delete u.value,e.modelValue!==t&&p!==t&&(p=t,x===!0&&(h=!0),C("update:modelValue",t),Z(()=>{p===t&&(p=NaN)})),k=void 0},e.type==="number"&&(w=!0,u.value=t),e.debounce!==void 0?(f!==null&&clearTimeout(f),u.value=t,f=setTimeout(k,e.debounce)):k()}function m(){requestAnimationFrame(()=>{const t=d.value;if(t!==null){const x=t.parentNode.style,{scrollTop:N}=t,{overflowY:T,maxHeight:_}=o.platform.is.firefox===!0?{}:window.getComputedStyle(t),D=T!==void 0&&T!=="scroll";D===!0&&(t.style.overflowY="hidden"),x.marginBottom=t.scrollHeight-1+"px",t.style.height="1px",t.style.height=t.scrollHeight+"px",D===!0&&(t.style.overflowY=parseInt(_,10)<t.scrollHeight?"auto":"hidden"),x.marginBottom="",t.scrollTop=N}})}function j(t){$(t),f!==null&&(clearTimeout(f),f=null),k!==void 0&&k(),C("change",t.target.value)}function I(t){t!==void 0&&le(t),f!==null&&(clearTimeout(f),f=null),k!==void 0&&k(),w=!1,h=!1,delete u.value,e.type!=="file"&&setTimeout(()=>{d.value!==null&&(d.value.value=F.value!==void 0?F.value:"")})}function v(){return u.hasOwnProperty("value")===!0?u.value:F.value!==void 0?F.value:""}Fe(()=>{I()}),_e(()=>{e.autogrow===!0&&m()}),Object.assign(O,{innerValue:F,fieldClass:A(()=>`q-${E.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:A(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:d,emitValue:c,hasValue:L,floatingLabel:A(()=>L.value===!0&&(e.type!=="number"||isNaN(F.value)===!1)||ne(e.displayValue)),getControl:()=>Y(E.value===!0?"textarea":"input",{ref:d,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...a.value,...l.value,...e.type!=="file"?{value:v()}:G.value}),getShadowControl:()=>Y("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(E.value===!0?"":" text-no-wrap")},[Y("span",{class:"invisible"},v()),Y("span",e.shadowText)])});const b=ke(O);return Object.assign(S,{focus:i,select:n,getNativeElement:()=>d.value}),Re(S,"nativeEl",()=>d.value),b}});const Pe=re({__name:"CustomNumberInput",props:{side:{type:String,default:""},mint:{type:String,default:""},init_value:{type:Number,default:0},precision:{type:Number,default:2},logoURI:{type:String,default:"unknown.png"}},emits:["valueChange"],setup(e,{emit:C}){const g=e,S=C,o=q({debug:!1,masked:!1,prefix:"",suffix:"",thousands:",",decimal:".",precision:g.precision,disableNegative:!0,disabled:!1,min:null,max:null,allowBlank:!1,minimumNumberOfCharacters:0,modelModifiers:{number:!1},shouldRound:!0,focusOnRight:!1});R(()=>g.init_value,()=>{u.value=parseFloat(g.init_value.toString()).toFixed(o.value.precision)}),R(()=>g.precision,()=>{o.value.precision=g.precision});const u=q(parseFloat(g.init_value.toString()).toFixed(o.value.precision)),p=A({get(){return Q(u.value,o.value)},set(h){let f=parseFloat(h.toString()).toFixed(o.value.precision);u.value=f,console.log(Q(u.value,o.value)),S("valueChange",Q(u.value,o.value))}}),w=A(()=>{var h;return parseFloat(p.value.replace(",",""))>0?((h=de().accounts.find(f=>f.account.data.parsed.info.mint==g.mint))==null?void 0:h.account.data.parsed.info.tokenAmount.uiAmount)>=parseFloat(p.value.toString().replace(",","")):!0});return(h,f)=>(J(),ee(Be,{disable:e.logoURI.includes("unknown"),debounce:"5000",filled:"",square:"","reverse-fill-mask":"",modelValue:p.value,"onUpdate:modelValue":f[0]||(f[0]=k=>p.value=k),"input-class":"text-right",rules:[k=>w.value||(e.side.toLowerCase().includes("offer")?"You have insufficient tokens!":!0)],label:"Amount"},{append:te(()=>[ae(we,{size:"sm",src:e.logoURI},null,8,["src"])]),_:1},8,["disable","modelValue","rules"]))}}),se={debug:!1,masked:!1,prefix:"",suffix:"",thousands:",",decimal:".",precision:2,disableNegative:!0,disabled:!1,min:null,max:null,allowBlank:!1,minimumNumberOfCharacters:0,modelModifiers:{number:!1},shouldRound:!0,focusOnRight:!1};function je(e,C=2){return se.precision=C,Q(e,se)}const qe={class:"col"},Ke={class:"text-center text-h4 q-my-sm"},Ue={class:""},$e=z("div",null,"Available:",-1),De={class:"col text-right"},Le=re({__name:"BuySellTokenInputElemenet",props:{token_amount:{type:Number,default:0},side:{type:String,default:"sell"},type:{type:String||void 0,default:void 0},token_input:{},disable:{type:Boolean,default:!1}},emits:["tokenChange","amountChange"],setup(e,{emit:C}){const g=e,S=C,o=q();g.token_input&&(o.value=g.token_input);const u=q(g.token_amount),p=A(()=>{let w=de().accounts.find(k=>{var d;return k.account.data.parsed.info.mint==((d=o.value)==null?void 0:d.address)}),h=w==null?void 0:w.account.data.parsed.info.tokenAmount.uiAmount,f=w==null?void 0:w.account.data.parsed.info.tokenAmount.decimals;return h?je(h,f):"-"});return R(()=>g.token_amount,()=>{u.value=g.token_amount}),R(()=>g.token_input,()=>{o.value=g.token_input}),R(()=>o.value,()=>{o.value||(u.value=0),S("tokenChange",o.value)}),R(()=>u.value,()=>{S("amountChange",u.value)}),(w,h)=>(J(),ee(Me,{class:"col",flat:""},{default:te(()=>{var f,k,d,K;return[z("div",qe,[z("div",Ke,[z("div",Ue,ie((f=g.side)==null?void 0:f.toUpperCase()),1)]),e.type!="take"?(J(),ee(be,{key:0,class:"col",show_only_available:e.side=="offer",init_value:e.token_input,onToken_change:h[0]||(h[0]=F=>o.value=F)},null,8,["show_only_available","init_value"])):Ae("",!0),z("div",{class:"text-weight-thin row q-ma-xs",onClick:h[1]||(h[1]=F=>u.value=p.value)},[ae(Ce,null,{default:te(()=>[Ee("'Click' to apply 100% ")]),_:1}),$e,z("div",De,ie(p.value),1)]),ae(Pe,{mint:((k=o.value)==null?void 0:k.address)??"",side:e.side,init_value:u.value,"logo-u-r-i":((d=o.value)==null?void 0:d.logoURI)??"unknown.png",precision:(K=o.value)==null?void 0:K.decimals,onValueChange:h[2]||(h[2]=F=>u.value=F),class:"col"},null,8,["mint","side","init_value","logo-u-r-i","precision"])])]}),_:1}))}});export{Be as Q,Le as _,je as f};
