import{W,v as D,A as T,p as C,B as w,X as x,_ as I,C as K}from"./QTable.3ad4ee9d.js";import{u as L,a as M,b as A,c as X}from"./QTabs.812f5111.js";import{u as Q,t as N,y as z,z as S,H as Y,ab as b,az as U,a4 as h,aA as B,ak as d,$ as a,v as P,bX as R,aj as u,w as G,a8 as y,a5 as O,a6 as r,aR as J,aa as o,a7 as t,ap as q,aB as V,a9 as Z,ai as ee}from"./index.d9e827b8.js";var $=Q({name:"QTab",props:L,emits:M,setup(s,{slots:n,emit:l}){const{renderTab:c}=A(s,n,l);return()=>c("div")}}),v=Q({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(s,{slots:n}){const l=Y(),c=N(()=>"q-td"+(s.autoWidth===!0?" q-table--col-auto-width":"")+(s.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(s.props===void 0)return z("td",{class:c.value},S(n.default));const _=l.vnode.key,m=(s.props.colsMap!==void 0?s.props.colsMap[_]:null)||s.props.col;if(m===void 0)return;const{row:k}=s.props;return z("td",{class:c.value+m.__tdClass(k),style:m.__tdStyle(k)},S(n.default))}}}),te=Q({name:"QTr",props:{props:Object,noHover:Boolean},setup(s,{slots:n}){const l=N(()=>"q-tr"+(s.props===void 0||s.props.header===!0?"":" "+s.props.__trClass)+(s.noHover===!0?" q-tr--no-hover":""));return()=>z("tr",{class:l.value},S(n.default))}});function f(s){var n;return s?((n=b().token_list.find(l=>l.address==s))==null?void 0:n.logoURI)??"unknown.png":"unknown.png"}function E(s){var n;return(n=b().token_list.find(l=>l.address==s))==null?void 0:n.name}const se={class:"text-body1"},F=U({__name:"FormatTokenNumber",props:["mint","amount"],setup(s){const n=s,l=N(()=>{var c;return{debug:!1,masked:!1,prefix:"",suffix:"",thousands:",",decimal:".",precision:((c=b().token_list.find(_=>_.address==n.mint))==null?void 0:c.decimals)??0,disableNegative:!0,disabled:!1,min:null,max:null,allowBlank:!1,minimumNumberOfCharacters:0,modelModifiers:{number:!1},shouldRound:!0,focusOnRight:!1}});return(c,_)=>(h(),B("p",se,d(a(W)(n.amount,l.value)),1))}}),oe={class:"row full-width items-center q-gutter-x-md"},ae=o("div",{class:"text-subtitle1"},"Sort by:",-1),ne={class:"q-gutter-y-xs"},re={class:"row items-center justify-around no-wrap"},le={class:"q-mx-sm text-subtitle1"},ce={class:"row items-center justify-around no-wrap"},ie={class:"q-mx-sm text-subtitle1"},ue={class:"q-gutter-y-xs"},de={class:"row items-center justify-end q-gutter-x-sm no-wrap"},me={class:"row items-center justify-end q-gutter-x-sm no-wrap"},_e={class:"q-gutter-y-xs"},we={class:"row items-center justify-end q-gutter-x-sm no-wrap"},fe={class:"text-subtitle2"},be={class:"row items-center justify-end q-gutter-x-sm no-wrap"},ke={class:"text-subtitle2"},ge={class:"row items-center justify-around"},ve={class:"row items-center justify-around q-gutter-sm"},he={key:1,class:"col text-center"},H=9,xe=U({__name:"EscrowTable",setup(s){P("buy_name");const n=R().path,l=[{name:"tokens",label:"Tokens",align:"center"},{name:"size",label:"Size",align:"center"},{name:"ppu",label:"Price per Unit",align:"center"},{name:"states",label:"",align:"center"},{name:"actions",label:"",align:"center"}],c=P(u().escrows);G(()=>u().escrow_selected,()=>c.value=u().escrows_filtered);function _(m){u().escrow_selected=m,n.includes("exchange")&&(b().showRightDrawer=!0)}return(m,k)=>{var j;return h(),B(J,null,[y(d(m.is_small_screen)+" ",1),(j=a(u)().escrows_filtered)!=null&&j.length?(h(),O(D,{key:0,class:"full-width",flat:"",square:"",bordered:"",rows:a(u)().escrows_filtered,columns:l,"row-key":"name","hide-bottom":"",pagination:{rowsPerPage:0}},{top:r(()=>[o("div",oe,[t(T,{class:"col"}),ae,o("div",null,[t(X,{modelValue:a(u)().sort_direction,"onUpdate:modelValue":k[0]||(k[0]=e=>a(u)().sort_direction=e),dense:"",align:"justify",breakpoint:0},{default:r(()=>[t($,{name:"buy_ppu","no-caps":"",label:"Buy Price"}),t($,{name:"sell_ppu","no-caps":"",label:"Sell Price"})]),_:1},8,["modelValue"])])])]),body:r(e=>[t(te,{props:e,onClick:i=>_(e.row)},{default:r(()=>[t(v,{key:"tokens",props:e},{default:r(()=>[o("div",ne,[o("div",re,[t(C,{label:"SELL",color:"red",outline:""}),t(T),o("div",le,d(a(E)(e.row.account.requestToken)),1),t(w,{size:"sm",src:a(f)(e.row.account.requestToken)},null,8,["src"])]),o("div",ce,[t(C,{label:"BUY",color:"green",outline:""}),t(T),o("div",ie,d(a(E)(e.row.account.depositToken)),1),t(w,{size:"sm",src:a(f)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(v,{key:"size",props:e},{default:r(()=>{var i,g;return[o("div",ue,[o("div",de,[t(F,{mint:e.row.account.requestToken,amount:e.row.account.tokensDepositRemaining.toNumber()*e.row.account.price*10**-((i=a(b)().token_list.find(p=>p.address==e.row.account.depositToken))==null?void 0:i.decimals)},null,8,["mint","amount"]),t(w,{size:"sm",src:a(f)(e.row.account.requestToken)},null,8,["src"])]),o("div",me,[t(F,{mint:e.row.account.depositToken,amount:e.row.account.tokensDepositRemaining.toNumber()*10**-((g=a(b)().token_list.find(p=>p.address==e.row.account.depositToken))==null?void 0:g.decimals)},null,8,["mint","amount"]),t(w,{size:"sm",src:a(f)(e.row.account.depositToken)},null,8,["src"])])])]}),_:2},1032,["props"]),t(v,{key:"ppu",props:e},{default:r(()=>[o("div",_e,[o("div",we,[o("div",fe,d(e.row.account.price.toFixed(H)),1),t(w,{size:"sm",src:a(f)(e.row.account.requestToken)},null,8,["src"])]),o("div",be,[o("div",ke,d((1/e.row.account.price).toFixed(H)),1),t(w,{size:"sm",src:a(f)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(v,{key:"states",props:e},{default:r(()=>{var i;return[o("div",ge,[o("div",null,[t(q,{size:"sm",name:"balance",color:e.row.account.allowPartialFill?"purple":"grey"},{default:r(()=>[t(x,null,{default:r(()=>[y("Partial fill "+d(e.row.account.allowPartialFill?"":"NOT ")+" allowed",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",null,[t(q,{size:"sm",name:"timer",color:e.row.account.expireTimestamp>0?"orange":"grey"},{default:r(()=>[t(x,null,{default:r(()=>[y("Will "+d(e.row.account.expireTimestamp>0?"":"NOT ")+" expire",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",null,[t(q,{size:"sm",name:"design_services",color:e.row.account.maker.toString()==((i=a(V)().publicKey.value)==null?void 0:i.toString())?"orange":"grey"},{default:r(()=>[t(x,null,{default:r(()=>{var g;return[y("You are "+d(e.row.account.maker.toString()===((g=a(V)().publicKey.value)==null?void 0:g.toString())?"":"NOT ")+" the creator",1)]}),_:2},1024)]),_:2},1032,["color"])]),t(I,{size:"xs",escrow:e.row},null,8,["escrow"])])]}),_:2},1032,["props"]),t(v,{key:"actions",props:e},{default:r(()=>{var i;return[o("div",ve,[t(Z,{to:"/details/"+((i=a(u)().escrow_selected)==null?void 0:i.publicKey.toString()),dense:"",color:"secondary",icon:"keyboard_double_arrow_right"},null,8,["to"]),a(R)().path.includes("manage")?(h(),O(K,{key:0})):ee("",!0)])]}),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows"])):(h(),B("h5",he,"No Escrows found"))],64)}}});export{$ as Q,xe as _};
