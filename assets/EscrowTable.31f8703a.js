import{X as M,I as W,K as T,D as P,L as f,Y as y,C as Y,k as X,M as G}from"./QTable.5f6308d4.js";import{d as O,c as A}from"./QTab.3b1ad070.js";import{u as U,t as B,y as C,z as N,H as J,ab as d,bC as L,a4 as v,bI as Q,ak as u,$ as s,v as q,bX as S,ae as V,aj as r,w as Z,a5 as $,a6 as n,aa as o,a7 as t,ap as z,a8 as p,bK as D,a9 as E,ai as K}from"./index.9b3c26b6.js";var g=U({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(a,{slots:c}){const l=J(),i=B(()=>"q-td"+(a.autoWidth===!0?" q-table--col-auto-width":"")+(a.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(a.props===void 0)return C("td",{class:i.value},N(c.default));const _=l.vnode.key,k=(a.props.colsMap!==void 0?a.props.colsMap[_]:null)||a.props.col;if(k===void 0)return;const{row:m}=a.props;return C("td",{class:i.value+k.__tdClass(m),style:k.__tdStyle(m)},N(c.default))}}}),ee=U({name:"QTr",props:{props:Object,noHover:Boolean},setup(a,{slots:c}){const l=B(()=>"q-tr"+(a.props===void 0||a.props.header===!0?"":" "+a.props.__trClass)+(a.noHover===!0?" q-tr--no-hover":""));return()=>C("tr",{class:l.value},N(c.default))}});function h(a){var c;return a?((c=d().token_list.find(l=>l.address==a))==null?void 0:c.logoURI)??"unknown.png":"unknown.png"}function F(a){var c;return(c=d().token_list.find(l=>l.address==a))==null?void 0:c.name}const te={class:"text-body1"},H=L({__name:"FormatTokenNumber",props:["mint","amount"],setup(a){const c=a,l=B(()=>{var i;return{debug:!1,masked:!1,prefix:"",suffix:"",thousands:",",decimal:".",precision:((i=d().token_list.find(_=>_.address==c.mint))==null?void 0:i.decimals)??0,disableNegative:!0,disabled:!1,min:null,max:null,allowBlank:!1,minimumNumberOfCharacters:0,modelModifiers:{number:!1},shouldRound:!0,focusOnRight:!1}});return(i,_)=>(v(),Q("p",te,u(s(M)(c.amount,l.value)),1))}}),se={class:"row full-width items-center q-gutter-x-md"},oe=o("div",{class:"text-subtitle1"},"Sort by:",-1),ae={class:"q-gutter-y-xs"},ne={class:"row items-center justify-around no-wrap"},ce={class:"q-mx-sm text-subtitle1"},le={class:"row items-center justify-around no-wrap"},re={class:"q-mx-sm text-subtitle1"},ie={class:"q-gutter-y-xs"},ue={class:"row items-center justify-end q-gutter-x-sm no-wrap"},de={class:"row items-center justify-end q-gutter-x-sm no-wrap"},_e={class:"q-gutter-y-xs"},me={class:"row items-center justify-end q-gutter-x-sm no-wrap"},we={class:"text-subtitle2"},fe={class:"row items-center justify-end q-gutter-x-sm no-wrap"},he={class:"text-subtitle2"},ke={class:"row items-center",style:{width:"100px"}},be={class:"col"},ge={class:"col"},ve={class:"col"},ye={class:"col"},pe={key:0,class:"row items-center justify-around q-gutter-sm"},xe={key:1,class:"col text-center"},I=9,ze=L({__name:"EscrowTable",setup(a){q("buy_name");const c=S().path,l=[{name:"tokens",label:"Tokens",align:"center"},{name:"size",label:"Size",align:"center"},{name:"ppu",label:"Price per Unit",align:"center"},{name:"states",label:"",align:"center"},{name:"actions",label:"",align:"center"}],i=q(V().screen.lt.md),_=q(r().escrows);Z(()=>r().escrow_selected,()=>_.value=r().escrows_filtered);function k(m){if(!i.value){if(r().escrow_selected==m){d().showRightDrawer=!1,r().escrow_selected=void 0;return}r().escrow_selected=m,c.includes("exchange")&&(d().showRightDrawer=!0)}}return(m,j)=>{var R;return(R=s(r)().escrows_filtered)!=null&&R.length?(v(),$(W,{key:0,class:"full-width",flat:"",square:"",bordered:"",rows:s(r)().escrows_filtered,columns:l,"row-key":"name","hide-bottom":"",pagination:{rowsPerPage:0}},{top:n(()=>[o("div",se,[t(T,{class:"col"}),oe,o("div",null,[t(A,{modelValue:s(r)().sort_direction,"onUpdate:modelValue":j[0]||(j[0]=e=>s(r)().sort_direction=e),dense:"",align:"justify",breakpoint:0},{default:n(()=>[t(O,{name:"buy_ppu","no-caps":"",label:"Buy Price"}),t(O,{name:"sell_ppu","no-caps":"",label:"Sell Price"})]),_:1},8,["modelValue"])])])]),body:n(e=>[t(ee,{props:e,onClick:w=>k(e.row)},{default:n(()=>[t(g,{key:"tokens",props:e},{default:n(()=>[o("div",ae,[o("div",ne,[t(P,{label:"SELL",color:"red",outline:""}),t(T),o("div",ce,u(s(F)(e.row.account.requestToken)),1),t(f,{size:"sm",src:s(h)(e.row.account.requestToken)},null,8,["src"])]),o("div",le,[t(P,{label:"BUY",color:"green",outline:""}),t(T),o("div",re,u(s(F)(e.row.account.depositToken)),1),t(f,{size:"sm",src:s(h)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(g,{key:"size",props:e},{default:n(()=>{var w,b;return[o("div",ie,[o("div",ue,[t(H,{mint:e.row.account.requestToken,amount:e.row.account.tokensDepositRemaining.toNumber()*e.row.account.price*10**-((w=s(d)().token_list.find(x=>x.address==e.row.account.depositToken))==null?void 0:w.decimals)},null,8,["mint","amount"]),t(f,{size:"sm",src:s(h)(e.row.account.requestToken)},null,8,["src"])]),o("div",de,[t(H,{mint:e.row.account.depositToken,amount:e.row.account.tokensDepositRemaining.toNumber()*10**-((b=s(d)().token_list.find(x=>x.address==e.row.account.depositToken))==null?void 0:b.decimals)},null,8,["mint","amount"]),t(f,{size:"sm",src:s(h)(e.row.account.depositToken)},null,8,["src"])])])]}),_:2},1032,["props"]),t(g,{key:"ppu",props:e},{default:n(()=>[o("div",_e,[o("div",me,[o("div",we,u(e.row.account.price.toFixed(I)),1),t(f,{size:"sm",src:s(h)(e.row.account.requestToken)},null,8,["src"])]),o("div",fe,[o("div",he,u((1/e.row.account.price).toFixed(I)),1),t(f,{size:"sm",src:s(h)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(g,{key:"states",props:e},{default:n(()=>{var w;return[o("div",ke,[o("div",be,[t(z,{size:"sm",name:"balance",color:e.row.account.allowPartialFill?"purple":"grey"},{default:n(()=>[t(y,null,{default:n(()=>[p("Partial fill "+u(e.row.account.allowPartialFill?"":"NOT ")+" allowed",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",ge,[t(z,{size:"sm",name:"timer",color:e.row.account.expireTimestamp>0?"orange":"grey"},{default:n(()=>[t(y,null,{default:n(()=>[p("Will "+u(e.row.account.expireTimestamp>0?"":"NOT ")+" expire",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",ve,[t(z,{size:"sm",name:"design_services",color:e.row.account.maker.toString()==((w=s(D)().publicKey.value)==null?void 0:w.toString())?"orange":"grey"},{default:n(()=>[t(y,null,{default:n(()=>{var b;return[p("You are "+u(e.row.account.maker.toString()===((b=s(D)().publicKey.value)==null?void 0:b.toString())?"":"NOT ")+" the creator",1)]}),_:2},1024)]),_:2},1032,["color"])]),o("div",ye,[t(Y,{size:"xs",escrow:e.row},null,8,["escrow"])])])]}),_:2},1032,["props"]),t(g,{key:"actions",props:e},{default:n(()=>[s(S)().path!="/exchange"||s(V)().screen.lt.md?(v(),Q("div",pe,[t(E,{to:"/details/"+e.row.publicKey.toString(),dense:"",color:"secondary",icon:"aspect_ratio"},{default:n(()=>[t(y,null,{default:n(()=>[p("Expand offer")]),_:1})]),_:2},1032,["to"]),t(E,{dense:"",onClick:()=>{s(X)("https://escrow.skullnbones.xyz/#/details/"+e.row.publicKey.toString())},color:"secondary",icon:"share"},null,8,["onClick"]),s(S)().path.includes("manage")?(v(),$(G,{key:0})):K("",!0)])):K("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows"])):(v(),Q("h5",xe,"No Escrows found"))}}});export{ze as _};
