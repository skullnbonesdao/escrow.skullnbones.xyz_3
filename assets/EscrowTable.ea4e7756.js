import{Y as M,J as I,L as T,E as P,M as f,Z as y,D as Y,k as J,N as G}from"./QTable.ab2d1800.js";import{d as E,c as Z}from"./QTab.d44bd087.js";import{u as W,t as C,y as N,z as Q,H as A,ae as d,a7 as L,a0 as v,a8 as B,aa as u,ab as s,v as q,bW as S,ah as O,am as r,w as X,a1 as V,a2 as n,a6 as o,a3 as t,ar as z,a4 as x,bJ as D,a5 as $,al as F}from"./index.f60c2afa.js";var b=W({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(a,{slots:c}){const l=A(),i=C(()=>"q-td"+(a.autoWidth===!0?" q-table--col-auto-width":"")+(a.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(a.props===void 0)return N("td",{class:i.value},Q(c.default));const _=l.vnode.key,k=(a.props.colsMap!==void 0?a.props.colsMap[_]:null)||a.props.col;if(k===void 0)return;const{row:m}=a.props;return N("td",{class:i.value+k.__tdClass(m),style:k.__tdStyle(m)},Q(c.default))}}}),ee=W({name:"QTr",props:{props:Object,noHover:Boolean},setup(a,{slots:c}){const l=C(()=>"q-tr"+(a.props===void 0||a.props.header===!0?"":" "+a.props.__trClass)+(a.noHover===!0?" q-tr--no-hover":""));return()=>N("tr",{class:l.value},Q(c.default))}});function h(a){var c;return a?((c=d().token_list.find(l=>l.address==a))==null?void 0:c.logoURI)??"unknown.png":"unknown.png"}function H(a){var c;return(c=d().token_list.find(l=>l.address==a))==null?void 0:c.name}const te={class:"text-body1"},K=L({__name:"FormatTokenNumber",props:["mint","amount"],setup(a){const c=a,l=C(()=>{var i;return{debug:!1,masked:!1,prefix:"",suffix:"",thousands:",",decimal:".",precision:((i=d().token_list.find(_=>_.address==c.mint))==null?void 0:i.decimals)??0,disableNegative:!0,disabled:!1,min:null,max:null,allowBlank:!1,minimumNumberOfCharacters:0,modelModifiers:{number:!1},shouldRound:!0,focusOnRight:!1}});return(i,_)=>(v(),B("p",te,u(s(M)(c.amount,l.value)),1))}}),se={class:"row full-width items-center q-gutter-x-md"},oe=o("div",{class:"text-subtitle1"},"Sort by:",-1),ae={class:"q-gutter-y-xs"},ne={class:"row items-center justify-around no-wrap"},ce={class:"q-mx-sm text-subtitle1"},le={class:"row items-center justify-around no-wrap"},re={class:"q-mx-sm text-subtitle1"},ie={class:"q-gutter-y-xs"},ue={class:"row items-center justify-end q-gutter-x-sm no-wrap"},de={class:"row items-center justify-end q-gutter-x-sm no-wrap"},_e={class:"q-gutter-y-xs"},me={class:"row items-center justify-end q-gutter-x-sm no-wrap"},we={class:"text-subtitle2"},fe={class:"row items-center justify-end q-gutter-x-sm no-wrap"},he={class:"text-subtitle2"},ke={class:"row items-center",style:{width:"100px"}},ge={class:"col"},be={class:"col"},ve={class:"col"},ye={class:"col"},xe={key:0,class:"row items-center justify-around q-gutter-sm"},pe={key:1,class:"col text-center"},U=9,ze=L({__name:"EscrowTable",setup(a){q("buy_name");const c=S().path,l=[{name:"tokens",label:"Tokens",align:"center"},{name:"size",label:"Size",align:"center"},{name:"ppu",label:"Price per Unit",align:"center"},{name:"states",label:"",align:"center"},{name:"actions",label:"",align:"center"}],i=q(O().screen.lt.md),_=q(r().escrows);X(()=>r().escrow_selected,()=>_.value=r().escrows_filtered);function k(m){if(!i.value){if(r().escrow_selected==m){d().showRightDrawer=!1,r().escrow_selected=void 0;return}r().escrow_selected=m,c.includes("exchange")&&(d().showRightDrawer=!0)}}return(m,j)=>{var R;return(R=s(r)().escrows_filtered)!=null&&R.length?(v(),V(I,{key:0,class:"full-width",flat:"",square:"",bordered:"",rows:s(r)().escrows_filtered,columns:l,"row-key":"name","hide-bottom":"",pagination:{rowsPerPage:0}},{top:n(()=>[o("div",se,[t(T,{class:"col"}),oe,o("div",null,[t(Z,{modelValue:s(r)().sort_direction,"onUpdate:modelValue":j[0]||(j[0]=e=>s(r)().sort_direction=e),dense:"",align:"justify",breakpoint:0},{default:n(()=>[t(E,{name:"buy_ppu","no-caps":"",label:"Buy Price"}),t(E,{name:"sell_ppu","no-caps":"",label:"Sell Price"})]),_:1},8,["modelValue"])])])]),body:n(e=>[t(ee,{props:e,onClick:w=>k(e.row)},{default:n(()=>[t(b,{key:"tokens",props:e},{default:n(()=>[o("div",ae,[o("div",ne,[t(P,{label:"SELL",color:"red",outline:""}),t(T),o("div",ce,u(s(H)(e.row.account.requestToken)),1),t(f,{size:"sm",src:s(h)(e.row.account.requestToken)},null,8,["src"])]),o("div",le,[t(P,{label:"BUY",color:"green",outline:""}),t(T),o("div",re,u(s(H)(e.row.account.depositToken)),1),t(f,{size:"sm",src:s(h)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(b,{key:"size",props:e},{default:n(()=>{var w,g;return[o("div",ie,[o("div",ue,[t(K,{mint:e.row.account.requestToken,amount:e.row.account.tokensDepositRemaining.toNumber()*e.row.account.price*10**-((w=s(d)().token_list.find(p=>p.address==e.row.account.depositToken))==null?void 0:w.decimals)},null,8,["mint","amount"]),t(f,{size:"sm",src:s(h)(e.row.account.requestToken)},null,8,["src"])]),o("div",de,[t(K,{mint:e.row.account.depositToken,amount:e.row.account.tokensDepositRemaining.toNumber()*10**-((g=s(d)().token_list.find(p=>p.address==e.row.account.depositToken))==null?void 0:g.decimals)},null,8,["mint","amount"]),t(f,{size:"sm",src:s(h)(e.row.account.depositToken)},null,8,["src"])])])]}),_:2},1032,["props"]),t(b,{key:"ppu",props:e},{default:n(()=>[o("div",_e,[o("div",me,[o("div",we,u(e.row.account.price.toFixed(U)),1),t(f,{size:"sm",src:s(h)(e.row.account.requestToken)},null,8,["src"])]),o("div",fe,[o("div",he,u((1/e.row.account.price).toFixed(U)),1),t(f,{size:"sm",src:s(h)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(b,{key:"states",props:e},{default:n(()=>{var w;return[o("div",ke,[o("div",ge,[t(z,{size:"sm",name:"balance",color:e.row.account.allowPartialFill?"purple":"grey"},{default:n(()=>[t(y,null,{default:n(()=>[x("Partial fill "+u(e.row.account.allowPartialFill?"":"NOT ")+" allowed",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",be,[t(z,{size:"sm",name:"timer",color:e.row.account.expireTimestamp>0?"orange":"grey"},{default:n(()=>[t(y,null,{default:n(()=>[x("Will "+u(e.row.account.expireTimestamp>0?"":"NOT ")+" expire",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",ve,[t(z,{size:"sm",name:"design_services",color:e.row.account.maker.toString()==((w=s(D)().publicKey.value)==null?void 0:w.toString())?"orange":"grey"},{default:n(()=>[t(y,null,{default:n(()=>{var g;return[x("You are "+u(e.row.account.maker.toString()===((g=s(D)().publicKey.value)==null?void 0:g.toString())?"":"NOT ")+" the creator",1)]}),_:2},1024)]),_:2},1032,["color"])]),o("div",ye,[t(Y,{size:"xs",escrow:e.row},null,8,["escrow"])])])]}),_:2},1032,["props"]),t(b,{key:"actions",props:e},{default:n(()=>[s(S)().path!="/exchange"||s(O)().screen.lt.md?(v(),B("div",xe,[t($,{to:"/details/"+e.row.publicKey.toString(),dense:"",color:"secondary",icon:"aspect_ratio"},{default:n(()=>[t(y,null,{default:n(()=>[x("Expand offer")]),_:1})]),_:2},1032,["to"]),t($,{dense:"",onClick:()=>{s(J)("https://escrow.skullnbones.xyz/#/details/"+e.row.publicKey.toString())},color:"secondary",icon:"share"},null,8,["onClick"]),s(S)().path.includes("manage")?(v(),V(G,{key:0,escrow_address:e.row.publicKey.toString()},null,8,["escrow_address"])):F("",!0)])):F("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows"])):(v(),B("h5",pe,"No Escrows found"))}}});export{ze as _};
