import{u as o,t as Ve,E as D,z as we,F as Ke,v as q,am as dt,w as vt,an as mt,ao as _t,ap as gt,aq as ft,ar as Se,L as ht,H as je,Y as wt,Z as Te,a3 as ue,a4 as Oe,a5 as u,ab as s,al as I,a9 as n,V as oe,a0 as a,ag as Q,aa as bt,ad as Ce,ac as ce,a1 as te,as as kt,at as pt,P as V,d as ve,au as me,av as _e,aw as xt,ax as yt,ay as St,aj as $t,az as Ct,a6 as R,ai as se,ak as qt}from"./index.c7e9314e.js";import{a as Tt,Q as ge,b as ze}from"./BuySellTokenInputElemenet.920aa2a3.js";import{Q as Ae,a as ie}from"./QCard.44faf1d3.js";import{h as Mt,e as ne,T as Bt,i as Rt,m as Pt,_ as Ft,n as fe,o as $e,p as Le,q as De,w as Nt,Q as It}from"./wait_for_transaction_confirmation.5bd3c94c.js";import{a as zt,u as At,Q as qe}from"./QSeparator.2ecb424d.js";const Lt={ratio:[String,Number]};function Dt(t,m){return o(()=>{const p=Number(t.ratio||(m!==void 0?m.value:void 0));return isNaN(p)!==!0&&p>0?{paddingBottom:`${100/p}%`}:null})}const Et=16/9;var Ee=Ve({name:"QImg",props:{...Lt,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Et},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(t,{slots:m,emit:p}){const i=D(t.initialRatio),e=Dt(t,i);let g=null,f=!1;const _=[D(null),D(M())],h=D(0),r=D(!1),b=D(!1),x=o(()=>`q-img q-img--${t.noNativeMenu===!0?"no-":""}menu`),y=o(()=>({width:t.width,height:t.height})),c=o(()=>`q-img__image ${t.imgClass!==void 0?t.imgClass+" ":""}q-img__image--with${t.noTransition===!0?"out":""}-transition`),w=o(()=>({...t.imgStyle,objectFit:t.fit,objectPosition:t.position}));we(()=>T(),B);function T(){return t.src||t.srcset||t.sizes?{src:t.src,srcset:t.srcset,sizes:t.sizes}:null}function M(){return t.placeholderSrc!==void 0?{src:t.placeholderSrc}:null}function B(d){g!==null&&(clearTimeout(g),g=null),b.value=!1,d===null?(r.value=!1,_[h.value^1].value=M()):r.value=!0,_[h.value].value=d}function P({target:d}){f!==!0&&(g!==null&&(clearTimeout(g),g=null),i.value=d.naturalHeight===0?.5:d.naturalWidth/d.naturalHeight,k(d,1))}function k(d,E){f===!0||E===1e3||(d.complete===!0?S(d):g=setTimeout(()=>{g=null,k(d,E+1)},50))}function S(d){f!==!0&&(h.value=h.value^1,_[h.value].value=null,r.value=!1,b.value=!1,p("load",d.currentSrc||d.src))}function A(d){g!==null&&(clearTimeout(g),g=null),r.value=!1,b.value=!0,_[h.value].value=null,_[h.value^1].value=M(),p("error",d)}function K(d){const E=_[d].value,L={key:"img_"+d,class:c.value,style:w.value,crossorigin:t.crossorigin,decoding:t.decoding,referrerpolicy:t.referrerpolicy,height:t.height,width:t.width,loading:t.loading,fetchpriority:t.fetchpriority,"aria-hidden":"true",draggable:t.draggable,...E};return h.value===d?(L.class+=" q-img__image--waiting",Object.assign(L,{onLoad:P,onError:A})):L.class+=" q-img__image--loaded",q("div",{class:"q-img__container absolute-full",key:"img"+d},q("img",L))}function F(){return r.value!==!0?q("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},vt(m[b.value===!0?"error":"default"])):q("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},m.loading!==void 0?m.loading():t.noSpinner===!0?void 0:[q(mt,{color:t.spinnerColor,size:t.spinnerSize})])}return B(T()),Ke(()=>{f=!0,g!==null&&(clearTimeout(g),g=null)}),()=>{const d=[];return e.value!==null&&d.push(q("div",{key:"filler",style:e.value})),b.value!==!0&&(_[0].value!==null&&d.push(K(0)),_[1].value!==null&&d.push(K(1))),d.push(q(dt,{name:"q-transition--fade"},F)),q("div",{class:x.value,style:y.value,role:"img","aria-label":t.alt},d)}}});async function he(t){_t.create({message:"Copied!"}),await navigator.clipboard.writeText(t)}const Qe="q-slider__marker-labels",Qt=t=>({value:t}),Vt=({marker:t})=>q("div",{key:t.value,style:t.style,class:t.classes},t.label),Ue=[34,37,40,33,39,38],Kt={...At,...Mt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},jt=["pan","update:modelValue","change"];function Ot({updateValue:t,updatePosition:m,getDragging:p,formAttrs:i}){const{props:e,emit:g,slots:f,proxy:{$q:_}}=je(),h=zt(e,_),r=Rt(i),b=D(!1),x=D(!1),y=D(!1),c=D(!1),w=o(()=>e.vertical===!0?"--v":"--h"),T=o(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),M=o(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(_.lang.rtl===!0)),B=o(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),P=o(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),k=o(()=>e.disable!==!0&&e.readonly!==!0&&B.value<P.value),S=o(()=>(String(e.step).trim().split(".")[1]||"").length),A=o(()=>e.step===0?1:e.step),K=o(()=>k.value===!0?e.tabindex||0:-1),F=o(()=>e.max-e.min),d=o(()=>P.value-B.value),E=o(()=>be(B.value)),L=o(()=>be(P.value)),j=o(()=>e.vertical===!0?M.value===!0?"bottom":"top":M.value===!0?"right":"left"),X=o(()=>e.vertical===!0?"height":"width"),le=o(()=>e.vertical===!0?"width":"height"),W=o(()=>e.vertical===!0?"vertical":"horizontal"),H=o(()=>{const l={role:"slider","aria-valuemin":B.value,"aria-valuemax":P.value,"aria-orientation":W.value,"data-step":e.step};return e.disable===!0?l["aria-disabled"]="true":e.readonly===!0&&(l["aria-readonly"]="true"),l}),Y=o(()=>`q-slider q-slider${w.value} q-slider--${b.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(k.value===!0?" q-slider--editable":""))+(y.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(h.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+w.value:""));function O(l){const v="q-slider__"+l;return`${v} ${v}${w.value} ${v}${w.value}${T.value}`}function Z(l){const v="q-slider__"+l;return`${v} ${v}${w.value}`}const ae=o(()=>{const l=e.selectionColor||e.color;return"q-slider__selection absolute"+(l!==void 0?` text-${l}`:"")}),J=o(()=>Z("markers")+" absolute overflow-hidden"),ee=o(()=>Z("track-container")),de=o(()=>O("pin")),U=o(()=>O("label")),N=o(()=>O("text-container")),We=o(()=>O("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),Ge=o(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),Xe=o(()=>{const l={[le.value]:e.trackSize};return e.trackImg!==void 0&&(l.backgroundImage=`url(${e.trackImg}) !important`),l}),He=o(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),Me=o(()=>{const l=L.value-E.value,v={[j.value]:`${100*E.value}%`,[X.value]:l===0?"2px":`${100*l}%`};return e.innerTrackImg!==void 0&&(v.backgroundImage=`url(${e.innerTrackImg}) !important`),v});function Ye(l){const{min:v,max:$,step:C}=e;let z=v+l*($-v);if(C>0){const G=(z-v)%C;z+=(Math.abs(G)>=C/2?(G<0?-1:1)*C:0)-G}return S.value>0&&(z=parseFloat(z.toFixed(S.value))),ne(z,B.value,P.value)}function be(l){return F.value===0?0:(l-e.min)/F.value}function Ze(l,v){const $=gt(l),C=e.vertical===!0?ne(($.top-v.top)/v.height,0,1):ne(($.left-v.left)/v.width,0,1);return ne(M.value===!0?1-C:C,E.value,L.value)}const Be=o(()=>ft(e.markers)===!0?e.markers:A.value),Re=o(()=>{const l=[],v=Be.value,$=e.max;let C=e.min;do l.push(C),C+=v;while(C<$);return l.push($),l}),Pe=o(()=>{const l=` ${Qe}${w.value}-`;return Qe+`${l}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${l}${M.value===!0?"rtl":"ltr"}`}),ke=o(()=>e.markerLabels===!1?null:et(e.markerLabels).map((l,v)=>({index:v,value:l.value,label:l.label||l.value,classes:Pe.value+(l.classes!==void 0?" "+l.classes:""),style:{...Ne(l.value),...l.style||{}}}))),Fe=o(()=>({markerList:ke.value,markerMap:tt.value,classes:Pe.value,getStyle:Ne})),Je=o(()=>{const l=d.value===0?"2px":100*Be.value/d.value;return{...Me.value,backgroundSize:e.vertical===!0?`2px ${l}%`:`${l}% 2px`}});function et(l){if(l===!1)return null;if(l===!0)return Re.value.map(Qt);if(typeof l=="function")return Re.value.map($=>{const C=l($);return Se(C)===!0?{...C,value:$}:{value:$,label:C}});const v=({value:$})=>$>=e.min&&$<=e.max;return Array.isArray(l)===!0?l.map($=>Se($)===!0?$:{value:$}).filter(v):Object.keys(l).map($=>{const C=l[$],z=Number($);return Se(C)===!0?{...C,value:z}:{value:z,label:C}}).filter(v)}function Ne(l){return{[j.value]:`${100*(l-e.min)/F.value}%`}}const tt=o(()=>{if(e.markerLabels===!1)return null;const l={};return ke.value.forEach(v=>{l[v.value]=v}),l});function lt(){if(f["marker-label-group"]!==void 0)return f["marker-label-group"](Fe.value);const l=f["marker-label"]||Vt;return ke.value.map(v=>l({marker:v,...Fe.value}))}const at=o(()=>[[Bt,st,void 0,{[W.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function st(l){l.isFinal===!0?(c.value!==void 0&&(m(l.evt),l.touch===!0&&t(!0),c.value=void 0,g("pan","end")),b.value=!1,y.value=!1):l.isFirst===!0?(c.value=p(l.evt),m(l.evt),t(),b.value=!0,g("pan","start")):(m(l.evt),t())}function Ie(){y.value=!1}function ot(l){m(l,p(l)),t(),x.value=!0,b.value=!0,document.addEventListener("mouseup",pe,!0)}function pe(){x.value=!1,b.value=!1,t(!0),Ie(),document.removeEventListener("mouseup",pe,!0)}function nt(l){m(l,p(l)),t(!0)}function it(l){Ue.includes(l.keyCode)&&t(!0)}function rt(l){if(e.vertical===!0)return null;const v=_.lang.rtl!==e.reverse?1-l:l;return{transform:`translateX(calc(${2*v-1} * ${e.thumbSize} / 2 + ${50-100*v}%))`}}function ct(l){const v=o(()=>x.value===!1&&(y.value===l.focusValue||y.value==="both")?" q-slider--focus":""),$=o(()=>`q-slider__thumb q-slider__thumb${w.value} q-slider__thumb${w.value}-${M.value===!0?"rtl":"ltr"} absolute non-selectable`+v.value+(l.thumbColor.value!==void 0?` text-${l.thumbColor.value}`:"")),C=o(()=>({width:e.thumbSize,height:e.thumbSize,[j.value]:`${100*l.ratio.value}%`,zIndex:y.value===l.focusValue?2:void 0})),z=o(()=>l.labelColor.value!==void 0?` text-${l.labelColor.value}`:""),G=o(()=>rt(l.ratio.value)),xe=o(()=>"q-slider__text"+(l.labelTextColor.value!==void 0?` text-${l.labelTextColor.value}`:""));return()=>{const ye=[q("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[q("path",{d:e.thumbPath})]),q("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(ye.push(q("div",{class:de.value+" absolute fit no-pointer-events"+z.value},[q("div",{class:U.value,style:{minWidth:e.thumbSize}},[q("div",{class:N.value,style:G.value},[q("span",{class:xe.value},l.label.value)])])])),e.name!==void 0&&e.disable!==!0&&r(ye,"push")),q("div",{class:$.value,style:C.value,...l.getNodeData()},ye)}}function ut(l,v,$,C){const z=[];e.innerTrackColor!=="transparent"&&z.push(q("div",{key:"inner",class:He.value,style:Me.value})),e.selectionColor!=="transparent"&&z.push(q("div",{key:"selection",class:ae.value,style:l.value})),e.markers!==!1&&z.push(q("div",{key:"marker",class:J.value,style:Je.value})),C(z);const G=[ht("div",{key:"trackC",class:ee.value,tabindex:v.value,...$.value},[q("div",{class:Ge.value,style:Xe.value},z)],"slide",k.value,()=>at.value)];if(e.markerLabels!==!1){const xe=e.switchMarkerLabelsSide===!0?"unshift":"push";G[xe](q("div",{key:"markerL",class:We.value},lt()))}return G}return Ke(()=>{document.removeEventListener("mouseup",pe,!0)}),{state:{active:b,focus:y,preventFocus:x,dragging:c,editable:k,classes:Y,tabindex:K,attributes:H,step:A,decimals:S,trackLen:F,innerMin:B,innerMinRatio:E,innerMax:P,innerMaxRatio:L,positionProp:j,sizeProp:X,isReversed:M},methods:{onActivate:ot,onMobileClick:nt,onBlur:Ie,onKeyup:it,getContent:ut,getThumbRenderFn:ct,convertRatioToModel:Ye,convertModelToRatio:be,getDraggingRatio:Ze}}}const Ut=()=>({});var Wt=Ve({name:"QSlider",props:{...Kt,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:jt,setup(t,{emit:m}){const{proxy:{$q:p}}=je(),{state:i,methods:e}=Ot({updateValue:w,updatePosition:M,getDragging:T,formAttrs:Pt(t)}),g=D(null),f=D(0),_=D(0);function h(){_.value=t.modelValue===null?i.innerMin.value:ne(t.modelValue,i.innerMin.value,i.innerMax.value)}we(()=>`${t.modelValue}|${i.innerMin.value}|${i.innerMax.value}`,h),h();const r=o(()=>e.convertModelToRatio(_.value)),b=o(()=>i.active.value===!0?f.value:r.value),x=o(()=>{const k={[i.positionProp.value]:`${100*i.innerMinRatio.value}%`,[i.sizeProp.value]:`${100*(b.value-i.innerMinRatio.value)}%`};return t.selectionImg!==void 0&&(k.backgroundImage=`url(${t.selectionImg}) !important`),k}),y=e.getThumbRenderFn({focusValue:!0,getNodeData:Ut,ratio:b,label:o(()=>t.labelValue!==void 0?t.labelValue:_.value),thumbColor:o(()=>t.thumbColor||t.color),labelColor:o(()=>t.labelColor),labelTextColor:o(()=>t.labelTextColor)}),c=o(()=>i.editable.value!==!0?{}:p.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:B,onBlur:e.onBlur,onKeydown:P,onKeyup:e.onKeyup});function w(k){_.value!==t.modelValue&&m("update:modelValue",_.value),k===!0&&m("change",_.value)}function T(){return g.value.getBoundingClientRect()}function M(k,S=i.dragging.value){const A=e.getDraggingRatio(k,S);_.value=e.convertRatioToModel(A),f.value=t.snap!==!0||t.step===0?A:e.convertModelToRatio(_.value)}function B(){i.focus.value=!0}function P(k){if(!Ue.includes(k.keyCode))return;wt(k);const S=([34,33].includes(k.keyCode)?10:1)*i.step.value,A=([34,37,40].includes(k.keyCode)?-1:1)*(i.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*S;_.value=ne(parseFloat((_.value+A).toFixed(i.decimals.value)),i.innerMin.value,i.innerMax.value),w()}return()=>{const k=e.getContent(x,i.tabindex,c,S=>{S.push(y())});return q("div",{ref:g,class:i.classes.value+(t.modelValue===null?" q-slider--no-value":""),...i.attributes.value,"aria-valuenow":t.modelValue},k)}}});function re(t,m=6){if(t){const p=t==null?void 0:t.substring(0,m),i=t==null?void 0:t.substring(t.length-m);return`${p}[...]${i}`}}const Gt={class:"col q-gutter-y-md"},Xt={class:"row items-center"},Ht=s("p",{class:"text-h6 col"},"State",-1),Yt={class:"q-mr-sm"},Zt={class:"col q-gutter-y-sm"},Jt={class:"row"},el=s("div",{class:"col text-weight-light text-no-wrap"},"Escrow:",-1),tl={class:"style-right"},ll={class:"row"},al=s("div",{class:"col text-weight-light text-no-wrap"},"Maker:",-1),sl={class:"style-right"},ol={class:"row"},nl=s("div",{class:"col text-weight-light text-no-wrap"},"Deposited:",-1),il={class:"col-9 text-right"},rl={class:"row"},cl=s("div",{class:"col text-weight-light text-no-wrap"},"Request:",-1),ul={class:"col-9 text-right"},dl={class:"row"},vl=s("div",{class:"col text-weight-light text-no-wrap"},"Deposit amount:",-1),ml={class:"col-9 text-right"},_l={class:"row"},gl=s("div",{class:"col text-weight-light text-no-wrap"},"Remaining amount:",-1),fl={class:"col-9 text-right"},hl={class:"row"},wl=s("div",{class:"col text-weight-light text-no-wrap"},"Price:",-1),bl={class:"col-9 text-right"},kl={class:"row"},pl=s("div",{class:"col text-weight-light text-no-wrap"},"Recipient:",-1),xl={class:"row"},yl=s("div",{class:"col text-weight-light text-no-wrap"},"Partial fill:",-1),Sl={class:"row"},$l=s("div",{class:"col text-weight-light text-no-wrap"},"Public",-1),Cl={class:"row"},ql=s("div",{class:"col text-weight-light text-no-wrap"},"Expire timestamp",-1),Tl=Te({__name:"EscrowDetails",setup(t){const m=o(()=>{var p,i;return(((p=a().escrow_selected)==null?void 0:p.account.tokensDepositRemaining.toNumber())??0)/(((i=a().escrow_selected)==null?void 0:i.account.tokensDepositInit.toNumber())??0)*100});return(p,i)=>{var e,g,f,_,h,r,b,x,y,c,w,T,M,B,P,k,S,A,K,F,d,E,L,j,X,le,W,H,Y,O,Z,ae,J,ee,de;return ue(),Oe("div",Gt,[u(qe),s("div",Xt,[Ht,s("p",Yt,I(m.value.toFixed(1))+"%",1),u(Ft,{escrow:n(a)().escrow_selected},null,8,["escrow"])]),u(qe),s("div",Zt,[s("div",Jt,[el,s("strong",tl,I(n(re)(((e=n(a)().escrow_selected)==null?void 0:e.publicKey.toString())??"")),1),u(oe,{flat:"",class:"q-pl-xs",size:"xs",name:"content_copy",onClick:i[0]||(i[0]=U=>{var N;return n(he)(((N=n(a)().escrow_selected)==null?void 0:N.publicKey.toString())??"")})})]),s("div",ll,[al,s("strong",sl,I(n(re)(((g=n(a)().escrow_selected)==null?void 0:g.account.maker.toString())??"")),1),u(oe,{flat:"",class:"q-pl-xs",size:"xs",name:"content_copy",onClick:i[1]||(i[1]=U=>{var N;return n(he)(((N=n(a)().escrow_selected)==null?void 0:N.account.maker.toString())??"")})})]),s("div",ol,[nl,s("strong",il,I(n(re)(((h=(_=(f=n(a)().escrow_selected)==null?void 0:f.account)==null?void 0:_.depositToken)==null?void 0:h.toString())??"")),1),u(oe,{flat:"",class:"q-pl-xs",size:"xs",name:"content_copy",onClick:i[2]||(i[2]=U=>{var N;return n(he)(((N=n(a)().escrow_selected)==null?void 0:N.account.depositToken.toString())??"")})})]),s("div",rl,[cl,s("strong",ul,I(n(re)(((x=(b=(r=n(a)().escrow_selected)==null?void 0:r.account)==null?void 0:b.requestToken)==null?void 0:x.toString())??"")),1),u(oe,{flat:"",class:"q-pl-xs",size:"xs",name:"content_copy",onClick:i[3]||(i[3]=U=>{var N;return n(he)(((N=n(a)().escrow_selected)==null?void 0:N.account.requestToken.toString())??"")})})]),s("div",dl,[vl,s("strong",ml,I((((c=(y=n(a)().escrow_selected)==null?void 0:y.account)==null?void 0:c.tokensDepositInit.toNumber())??0)*10**-(((T=(w=n(Q)().token_list)==null?void 0:w.find(U=>{var N;return U.address==((N=n(a)().escrow_selected)==null?void 0:N.account.depositToken.toString())}))==null?void 0:T.decimals)??0)),1)]),s("div",_l,[gl,s("strong",fl,I((((B=(M=n(a)().escrow_selected)==null?void 0:M.account)==null?void 0:B.tokensDepositRemaining.toNumber())??0)*10**-(((k=(P=n(Q)().token_list)==null?void 0:P.find(U=>{var N;return U.address==((N=n(a)().escrow_selected)==null?void 0:N.account.depositToken.toString())}))==null?void 0:k.decimals)??0)),1)]),s("div",hl,[wl,s("strong",bl,I((S=n(a)().escrow_selected)==null?void 0:S.account.price),1)]),s("div",kl,[pl,u(fe,{outline:"",label:(K=(A=n(a)().escrow_selected)==null?void 0:A.account)!=null&&K.onlyRecipient?n(re)(((d=(F=n(a)().escrow_selected)==null?void 0:F.account)==null?void 0:d.recipient.toString())??""):"any"},null,8,["label"])]),s("div",xl,[yl,u(fe,{outline:"",label:(L=(E=n(a)().escrow_selected)==null?void 0:E.account)!=null&&L.allowPartialFill?"yes":"no",color:(X=(j=n(a)().escrow_selected)==null?void 0:j.account)!=null&&X.allowPartialFill?"purple":"grey"},null,8,["label","color"])]),s("div",Sl,[$l,u(fe,{outline:"",class:"",label:(W=(le=n(a)().escrow_selected)==null?void 0:le.account)!=null&&W.onlyWhitelist?"no":"yes",color:(Y=(H=n(a)().escrow_selected)==null?void 0:H.account)!=null&&Y.onlyWhitelist?"yellow":"green"},null,8,["label","color"])]),s("div",Cl,[ql,u(fe,{outline:"",class:"",label:((Z=(O=n(a)().escrow_selected)==null?void 0:O.account)==null?void 0:Z.expireTimestamp.toNumber())!=0?(J=(ae=n(a)().escrow_selected)==null?void 0:ae.account)==null?void 0:J.expireTimestamp.toNumber():"never",color:((de=(ee=n(a)().escrow_selected)==null?void 0:ee.account)==null?void 0:de.expireTimestamp.toNumber())!=0?"yellow":"grey"},null,8,["label","color"])])])])}}});async function Ml(t,m){return m*Math.pow(10,await Bl(t))}async function Bl(t){var p,i;const m=((p=Q().token_list.find(e=>e.address==t.toString()))==null?void 0:p.decimals)??0;return m==0?(i=(await Q().connection.getParsedAccountInfo(t)).value)==null?void 0:i.data.parsed.info.decimals:m}const Rl={key:0,class:"row justify-center bg-secondary"},Pl=Te({__name:"ExchangeEscrowAction",props:["exchange_amount"],setup(t){const m=bt(),p=t;async function i(){var h,r,b,x,y,c,w,T,M,B,P,k,S,A,K;const e=Ct(),{sendTransaction:g}=te(),f=e==null?void 0:e.pg_escrow;if(kt(((h=a().escrow_selected)==null?void 0:h.account.requestToken.toString())??"")<p.exchange_amount){console.log("BBB"),m.notify({message:`You dont have enough '${(r=Q().token_list.find(F=>{var d;return F.address==((d=a().escrow_selected)==null?void 0:d.account.requestToken.toString())}))==null?void 0:r.name}' to fill the trade!`,color:"info"});return}let _=m.notify({group:!1,timeout:0,spinner:!0,message:"Preparing transaction..."});try{if(a().escrow_selected){let F=new pt;const d=a().escrow_selected.account.seed,E=a().escrow_selected.account.maker,L=V.findProgramAddressSync([ve.Buffer.from("escrow"),E.toBytes(),d.toArrayLike(ve.Buffer).reverse()],f==null?void 0:f.value.programId)[0],j=V.findProgramAddressSync([ve.Buffer.from("vault"),L.toBuffer()],f==null?void 0:f.value.programId)[0],X=V.findProgramAddressSync([ve.Buffer.from("auth"),L.toBuffer()],f==null?void 0:f.value.programId)[0],le=$e(new V(((b=a().escrow_selected)==null?void 0:b.account.requestToken)??""),(x=a().escrow_selected)==null?void 0:x.account.maker,void 0,me,_e),W=$e(new V(((y=a().escrow_selected)==null?void 0:y.account.depositToken)??""),te().publicKey.value,void 0,me,_e);await Le(new V(((c=a().escrow_selected)==null?void 0:c.account.depositToken)??""),te().publicKey.value)||F.add(De(W,new V(((w=a().escrow_selected)==null?void 0:w.account.depositToken)??"")));const H=$e(new V(((T=a().escrow_selected)==null?void 0:T.account.requestToken)??""),te().publicKey.value,void 0,me,_e);await Le(new V(((M=a().escrow_selected)==null?void 0:M.account.requestToken)??""),te().publicKey.value)||F.add(De(H,new V(((B=a().escrow_selected)==null?void 0:B.account.requestToken)??"")));const Y=await Ml(new V(((P=a().escrow_selected)==null?void 0:P.account.depositToken)??""),p.exchange_amount);console.log(`exchange_amount: ${Y}`);let O=null,Z=null,ae=null,J=await(f==null?void 0:f.value.methods.exchange(new xt(Y)).accounts({taker:new V(((k=te().publicKey)==null?void 0:k.value)??""),takerAta:H,takerReceiveAta:W,requestToken:(S=a().escrow_selected)==null?void 0:S.account.requestToken,maker:(A=a().escrow_selected)==null?void 0:A.account.maker,makerReceiveAta:le,depositToken:(K=a().escrow_selected)==null?void 0:K.account.depositToken,auth:X,escrow:L,vault:j,tokenProgram:me,associatedTokenProgram:_e,systemProgram:yt.programId,fee:St,whitelistProgram:O,whitelist:Z,entry:ae}).transaction());J&&F.add(J);const ee=await g(F,Q().connection);await Nt(Q().connection,ee),console.log(ee)}}catch(F){_({type:"negative",icon:"error",spinner:!1,message:F.toString(),timeout:5e3}),console.error(F)}}return(e,g)=>n(te)().publicKey.value?(ue(),Ce(ce,{key:1,color:"secondary ",class:"full-width",label:"Exchange",onClick:g[0]||(g[0]=f=>i().then(()=>{}))})):(ue(),Oe("div",Rl,[u(n($t),{dark:""})]))}}),Fl={class:"full-width"},Nl={class:"q-ml-md"},Il={class:"row"},zl=["src"],Al=["src"],Ll={class:"col"},Dl={class:"text-h5 col-2"},El={class:"text-h6 col-2"},Ql={class:"row full-width items-center"},Vl=s("div",{class:"text-h6"},"Price",-1),Kl={class:"col"},jl={class:"row q-gutter-x-sm"},Ol={class:"col text-right items-center"},Ul={class:"row q-gutter-x-sm"},Wl={class:"col text-right items-center"},Gl={class:"row justify-center"},Xl={class:"col"},Hl={class:"row items-center"},Yl={class:"q-px-sm row"},Zl={class:"col"},Jl=s("div",{class:"text-center text-h6"},"Wallet balance changes",-1),ea={class:"row items-center text-subtitle2 q-gutter-x-sm q-ma-sm"},ta={class:"col"},la={class:"text-subtitle1 text-bold text-red"},aa=["src"],sa={class:"row items-center q-gutter-x-sm q-ma-sm"},oa={class:"col text-subtitle2"},na={class:"text-subtitle1 text-bold text-green"},ia=["src"],ra=s("p",{class:"text-right q-mt-sm text-weight-thin"},"Fee: FEEXXX sol",-1),_a=Te({__name:"EscrowTakeView",setup(t){const m=o(()=>Q().token_list.find(h=>{var r;return h.address==((r=a().escrow_selected)==null?void 0:r.account.depositToken.toString())})),p=o(()=>Q().token_list.find(h=>{var r;return h.address==((r=a().escrow_selected)==null?void 0:r.account.requestToken.toString())})),i=o(()=>{var h,r;return parseInt(((((h=a().escrow_selected)==null?void 0:h.account.tokensDepositRemaining.toNumber())??0)*Math.pow(10,-(((r=m.value)==null?void 0:r.decimals)??0))).toFixed(2))});we(()=>i.value,()=>{_("sell",e.value)});const e=D(i.value),g=D(0);_("sell",e.value),we(()=>a().escrow_selected,()=>{e.value=i.value,_("sell",e.value)});function f(h){var r,b;e.value=(((r=a().escrow_selected)==null?void 0:r.account.tokensDepositRemaining.toNumber())??0)*Math.pow(10,-(((b=m.value)==null?void 0:b.decimals)??0))*h,_("sell",e.value)}function _(h,r){var b,x;switch(console.log(h),h){case"buy":e.value=r/(((b=a().escrow_selected)==null?void 0:b.account.price)??0);break;case"sell":g.value=r*(((x=a().escrow_selected)==null?void 0:x.account.price)??0)}console.log(`Amount_to_buy ${e.value}`),console.log(`amount_to_sell ${g.value}`)}return(h,r)=>(ue(),Ce(Ae,{flat:"",class:""},{default:R(()=>{var b;return[u(It,{class:""},{default:R(()=>[u(Tt,{icon:"info",label:"Details",dense:""},{header:R(()=>[s("div",Fl,[u(ge,{flat:"",class:"text-center full-width row items-center"},{default:R(()=>{var x,y;return[s("div",Nl,[s("div",Il,[u(se,{size:"40px",color:"white"},{default:R(()=>{var c;return[s("img",{src:((c=p.value)==null?void 0:c.logoURI)??"unknown.png"},null,8,zl)]}),_:1}),u(se,{size:"40px",class:"overlapping",style:`right: ${15}px`,color:"white"},{default:R(()=>{var c;return[s("img",{src:((c=m.value)==null?void 0:c.logoURI)??"unknown.png"},null,8,Al)]}),_:1})])]),s("div",Ll,[s("div",Dl,I((x=n(Q)().token_list.find(c=>{var w;return c.address==((w=n(a)().escrow_selected)==null?void 0:w.account.requestToken.toString())}))==null?void 0:x.name),1),u(oe,{size:"md",name:"swap_vert"}),s("div",El,I((y=n(Q)().token_list.find(c=>{var w;return c.address==((w=n(a)().escrow_selected)==null?void 0:w.account.depositToken.toString())}))==null?void 0:y.name),1)])]}),_:1})])]),default:R(()=>[u(Ae,null,{default:R(()=>[u(ie,null,{default:R(()=>[u(Tl)]),_:1})]),_:1})]),_:1})]),_:1}),u(ie,{class:""},{default:R(()=>[u(ge,{class:"full-width q-pa-sm"},{default:R(()=>{var x,y;return[s("div",Ql,[Vl,s("div",Kl,[s("div",jl,[s("div",Ol,I(((x=n(a)().escrow_selected)==null?void 0:x.account.price.toFixed(10))??0),1),u(se,{size:"xs",color:"white"},{default:R(()=>{var c;return[u(Ee,{src:((c=n(Q)().token_list.find(w=>{var T;return w.address==((T=n(a)().escrow_selected)==null?void 0:T.account.requestToken.toString())}))==null?void 0:c.logoURI)??"unknown.png"},null,8,["src"])]}),_:1})]),s("div",Ul,[s("div",Wl,I((1/(((y=n(a)().escrow_selected)==null?void 0:y.account.price)??0)).toFixed(10)),1),u(se,{size:"xs",color:"white"},{default:R(()=>{var c;return[u(Ee,{src:((c=n(Q)().token_list.find(w=>{var T;return w.address==((T=n(a)().escrow_selected)==null?void 0:T.account.depositToken.toString())}))==null?void 0:c.logoURI)??"unknown.png"},null,8,["src"])]}),_:1})])])])]}),_:1})]),_:1}),(b=n(a)().escrow_selected)!=null&&b.account.allowPartialFill?(ue(),Ce(ie,{key:0,class:"q-gutter-y-sm"},{default:R(()=>{var x,y;return[u(ze,{side:"Takes",type:"take",class:"full-width",token_amount:g.value,token_input:p.value,disable:!((x=n(a)().escrow_selected)!=null&&x.account.allowPartialFill),onAmountChange:r[0]||(r[0]=c=>{g.value=c,_("buy",c)})},null,8,["token_amount","token_input","disable"]),s("div",Gl,[u(oe,{size:"md",name:"swap_vert"})]),u(ze,{side:"gives",type:"take",class:"full-width",token_amount:e.value,token_input:m.value,disable:!((y=n(a)().escrow_selected)!=null&&y.account.allowPartialFill),onAmountChange:r[1]||(r[1]=c=>{e.value=c,_("sell",c)})},null,8,["token_amount","token_input","disable"]),u(ge,{class:"full-width q-pa-sm"},{default:R(()=>{var c,w,T,M,B,P,k;return[s("div",Xl,[s("div",Hl,[u(Wt,{class:"q-px-sm",dense:"",modelValue:e.value,"onUpdate:modelValue":[r[2]||(r[2]=S=>e.value=S),r[3]||(r[3]=S=>_("sell",S))],disable:!((c=n(a)().escrow_selected)!=null&&c.account.allowPartialFill),min:0,max:(((w=n(a)().escrow_selected)==null?void 0:w.account.tokensDepositRemaining.toNumber())??0)*Math.pow(10,-(((T=m.value)==null?void 0:T.decimals)??0)),color:"blue","track-size":"10px","thumb-color":"black",markers:""},null,8,["modelValue","disable","max"])]),s("div",Yl,[u(ce,{disable:!((M=n(a)().escrow_selected)!=null&&M.account.allowPartialFill),dense:"",flat:"",class:"col",label:"25%",onClick:r[4]||(r[4]=S=>f(.25))},null,8,["disable"]),u(ce,{disable:!((B=n(a)().escrow_selected)!=null&&B.account.allowPartialFill),dense:"",flat:"",class:"col",label:"50%",onClick:r[5]||(r[5]=S=>f(.5))},null,8,["disable"]),u(ce,{disable:!((P=n(a)().escrow_selected)!=null&&P.account.allowPartialFill),dense:"",flat:"",class:"col",label:"75%",onClick:r[6]||(r[6]=S=>f(.75))},null,8,["disable"]),u(ce,{disable:!((k=n(a)().escrow_selected)!=null&&k.account.allowPartialFill),dense:"",flat:"",class:"col",label:"Max",onClick:r[7]||(r[7]=S=>f(1))},null,8,["disable"])])])]}),_:1})]}),_:1})):qt("",!0),u(ie,null,{default:R(()=>[u(ge,{class:"full-width"},{default:R(()=>{var x,y;return[s("div",Zl,[Jl,u(qe),s("div",ea,[s("div",ta,I((x=p.value)==null?void 0:x.symbol),1),s("div",la,I()+"-"+I(g.value.toFixed(2)),1),u(se,{size:"sm",color:"white"},{default:R(()=>{var c;return[s("img",{src:((c=p.value)==null?void 0:c.logoURI)??"unknown.png"},null,8,aa)]}),_:1})]),s("div",sa,[s("div",oa,I((y=m.value)==null?void 0:y.symbol),1),s("div",na," +"+I(Math.trunc(e.value).toFixed(2)),1),u(se,{size:"sm",color:"white"},{default:R(()=>{var c;return[s("img",{src:((c=m.value)==null?void 0:c.logoURI)??"unknown.png"},null,8,ia)]}),_:1})])])]}),_:1})]),_:1}),u(ie,{class:""},{default:R(()=>[u(Pl,{exchange_amount:e.value},null,8,["exchange_amount"]),ra]),_:1})]}),_:1}))}});export{Ee as Q,_a as _,he as c,re as f};
