import{e as L,P as W,R as oe,T as se,y as j,M as J,_ as H,O as K,N as Te,B as X,L as $e,J as Pe}from"./QTable.14100e7f.js";import{u as Qe,a as Me,c as Oe,Q as I,b as re}from"./QCard.a5ebbab2.js";import{Q as ie}from"./QTab.9d011ea4.js";import{Q as je,_ as De}from"./FilterEscrows2.0ed6acd1.js";import{u as Re,v as _,t as f,bT as He,w as Ae,av as Be,aw as Ee,x as Fe,y as x,R as Ne,K as ne,H as Le,a7 as _e,ad as be,b_ as Ie,br as Ue,a0 as g,a8 as U,a9 as ce,b$ as ue,am as D,a1 as p,a2 as s,a3 as o,a6 as r,ah as Ye,ab as u,aa as b,af as y,ar as Q,al as B,a4 as Y,bj as de,I as We}from"./index.6b79b95a.js";import{Q as Je}from"./QPage.59b5b904.js";import{g as A,Q as Z}from"./get_token_imageURL_form_mint.82ca2c78.js";import{f as ve}from"./format_address.20184662.js";const he=["vertical","horizontal"],V={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},fe={prevent:!0,mouse:!0,mouseAllDir:!0},me=c=>c>=250?50:Math.ceil(c/5);var Xe=Re({name:"QScrollArea",props:{...Qe,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(c,{slots:M,emit:R}){const T=_(!1),q=_(!1),C=_(!1),i={vertical:_(0),horizontal:_(0)},e={vertical:{ref:_(null),position:_(0),size:_(0)},horizontal:{ref:_(null),position:_(0),size:_(0)}},{proxy:S}=Le(),k=Me(c,S.$q);let h=null,m;const v=_(null),l=f(()=>"q-scrollarea"+(k.value===!0?" q-scrollarea--dark":""));e.vertical.percentage=f(()=>{const t=e.vertical.size.value-i.vertical.value;if(t<=0)return 0;const a=L(e.vertical.position.value/t,0,1);return Math.round(a*1e4)/1e4}),e.vertical.thumbHidden=f(()=>(c.visible===null?C.value:c.visible)!==!0&&T.value===!1&&q.value===!1||e.vertical.size.value<=i.vertical.value+1),e.vertical.thumbStart=f(()=>e.vertical.percentage.value*(i.vertical.value-e.vertical.thumbSize.value)),e.vertical.thumbSize=f(()=>Math.round(L(i.vertical.value*i.vertical.value/e.vertical.size.value,me(i.vertical.value),i.vertical.value))),e.vertical.style=f(()=>({...c.thumbStyle,...c.verticalThumbStyle,top:`${e.vertical.thumbStart.value}px`,height:`${e.vertical.thumbSize.value}px`})),e.vertical.thumbClass=f(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.vertical.barClass=f(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),e.horizontal.percentage=f(()=>{const t=e.horizontal.size.value-i.horizontal.value;if(t<=0)return 0;const a=L(Math.abs(e.horizontal.position.value)/t,0,1);return Math.round(a*1e4)/1e4}),e.horizontal.thumbHidden=f(()=>(c.visible===null?C.value:c.visible)!==!0&&T.value===!1&&q.value===!1||e.horizontal.size.value<=i.horizontal.value+1),e.horizontal.thumbStart=f(()=>e.horizontal.percentage.value*(i.horizontal.value-e.horizontal.thumbSize.value)),e.horizontal.thumbSize=f(()=>Math.round(L(i.horizontal.value*i.horizontal.value/e.horizontal.size.value,me(i.horizontal.value),i.horizontal.value))),e.horizontal.style=f(()=>({...c.thumbStyle,...c.horizontalThumbStyle,[S.$q.lang.rtl===!0?"right":"left"]:`${e.horizontal.thumbStart.value}px`,width:`${e.horizontal.thumbSize.value}px`})),e.horizontal.thumbClass=f(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.horizontal.barClass=f(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const d=f(()=>e.vertical.thumbHidden.value===!0&&e.horizontal.thumbHidden.value===!0?c.contentStyle:c.contentActiveStyle),z=[[se,t=>{te(t,"vertical")},void 0,{vertical:!0,...fe}]],w=[[se,t=>{te(t,"horizontal")},void 0,{horizontal:!0,...fe}]];function O(){const t={};return he.forEach(a=>{const n=e[a];t[a+"Position"]=n.position.value,t[a+"Percentage"]=n.percentage.value,t[a+"Size"]=n.size.value,t[a+"ContainerSize"]=i[a].value}),t}const G=He(()=>{const t=O();t.ref=S,R("scroll",t)},0);function ee(t,a,n){if(he.includes(t)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(t==="vertical"?oe:W)(v.value,a,n)}function ge({height:t,width:a}){let n=!1;i.vertical.value!==t&&(i.vertical.value=t,n=!0),i.horizontal.value!==a&&(i.horizontal.value=a,n=!0),n===!0&&E()}function ye({position:t}){let a=!1;e.vertical.position.value!==t.top&&(e.vertical.position.value=t.top,a=!0),e.horizontal.position.value!==t.left&&(e.horizontal.position.value=t.left,a=!0),a===!0&&E()}function ze({height:t,width:a}){e.horizontal.size.value!==a&&(e.horizontal.size.value=a,E()),e.vertical.size.value!==t&&(e.vertical.size.value=t,E())}function te(t,a){const n=e[a];if(t.isFirst===!0){if(n.thumbHidden.value===!0)return;m=n.position.value,q.value=!0}else if(q.value!==!0)return;t.isFinal===!0&&(q.value=!1);const P=V[a],N=i[a].value,ke=(n.size.value-N)/(N-n.thumbSize.value),qe=t.distance[P.dist],Ce=m+(t.direction===P.dir?1:-1)*qe*ke;ae(Ce,a)}function le(t,a){const n=e[a];if(n.thumbHidden.value!==!0){const P=t[V[a].offset];if(P<n.thumbStart.value||P>n.thumbStart.value+n.thumbSize.value){const N=P-n.thumbSize.value/2;ae(N/i[a].value*n.size.value,a)}n.ref.value!==null&&n.ref.value.dispatchEvent(new MouseEvent(t.type,t))}}function Se(t){le(t,"vertical")}function we(t){le(t,"horizontal")}function E(){T.value=!0,h!==null&&clearTimeout(h),h=setTimeout(()=>{h=null,T.value=!1},c.delay),c.onScroll!==void 0&&G()}function ae(t,a){v.value[V[a].scroll]=t}let $=null;function pe(){$!==null&&clearTimeout($),$=setTimeout(()=>{$=null,C.value=!0},S.$q.platform.is.ios?50:0)}function xe(){$!==null&&(clearTimeout($),$=null),C.value=!1}let F=null;return Ae(()=>S.$q.lang.rtl,t=>{v.value!==null&&W(v.value,Math.abs(e.horizontal.position.value)*(t===!0?-1:1))}),Be(()=>{F={top:e.vertical.position.value,left:e.horizontal.position.value}}),Ee(()=>{if(F===null)return;const t=v.value;t!==null&&(W(t,F.left),oe(t,F.top))}),Fe(G.cancel),Object.assign(S,{getScrollTarget:()=>v.value,getScroll:O,getScrollPosition:()=>({top:e.vertical.position.value,left:e.horizontal.position.value}),getScrollPercentage:()=>({top:e.vertical.percentage.value,left:e.horizontal.percentage.value}),setScrollPosition:ee,setScrollPercentage(t,a,n){ee(t,a*(e[t].size.value-i[t].value)*(t==="horizontal"&&S.$q.lang.rtl===!0?-1:1),n)}}),()=>x("div",{class:l.value,onMouseenter:pe,onMouseleave:xe},[x("div",{ref:v,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:c.tabindex!==void 0?c.tabindex:void 0},[x("div",{class:"q-scrollarea__content absolute",style:d.value},Ne(M.default,[x(ie,{debounce:0,onResize:ze})])),x(je,{axis:"both",onScroll:ye})]),x(ie,{debounce:0,onResize:ge}),x("div",{class:e.vertical.barClass.value,style:[c.barStyle,c.verticalBarStyle],"aria-hidden":"true",onMousedown:Se}),x("div",{class:e.horizontal.barClass.value,style:[c.barStyle,c.horizontalBarStyle],"aria-hidden":"true",onMousedown:we}),ne(x("div",{ref:e.vertical.ref,class:e.vertical.thumbClass.value,style:e.vertical.style.value,"aria-hidden":"true"}),z),ne(x("div",{ref:e.horizontal.ref,class:e.horizontal.thumbClass.value,style:e.horizontal.style.value,"aria-hidden":"true"}),w)])}});const Ze={key:0,class:"q-gutter-y-xs"},Ve={class:"row items-center"},Ke={style:{width:"100px"},class:"row items-center q-gutter-x-sm"},Ge={class:"text-white"},et={class:"col q-gutter-y-xs"},tt={class:"text-white"},lt={class:"text-h6 text-weight-light",style:{width:"200px"}},at={class:"row items-center"},ot={class:"row items-center"},st={style:{width:"70px"},class:"q-gutter-y-xs"},rt={class:"text-white"},it={style:{width:"70px"},class:"q-gutter-y-xs"},nt={class:"text-white"},ct={class:"row items-center justify-evenly"},ut={class:"text-h6 text-weight-light",style:{width:"200px"}},dt={class:"text-h6 text-weight-light",style:{width:"200px"}},vt={class:"row items-center"},ht={class:"col q-gutter-y-sm"},ft={class:"row items-center q-gutter-x-xs justify-end"},mt={class:"row items-center q-gutter-x-xs justify-end"},_t={class:"row items-center",style:{width:"100px"}},bt={class:"col"},gt={class:"col"},yt={class:"col"},zt={class:"col"},St={key:1,class:"col text-center"},wt=r("h5",null,"No Escrows found",-1),pt=r("h6",null,"You may need to check your filter settings",-1),xt=[wt,pt],kt=_e({__name:"EscrowCards",setup(c){_("buy_name");const M=_(be().screen.lt.md),R=Ie().path;function T(e,S){return e?e==null?void 0:e.reduce((h,m)=>{const{depositToken:v,requestToken:l}=m.account,d=y().token_list.find(O=>O.address==v.toString()),z=y().token_list.find(O=>O.address==l.toString());let w;return S=="buy"?w=`${d==null?void 0:d.symbol}`:S=="sell"?w=`${z==null?void 0:z.symbol}`:S=="3"&&(w=`${d==null?void 0:d.symbol}-${z==null?void 0:z.symbol}`),h[w]||(h[w]=[]),h[w].push(m),h},{}):void 0}const q=Ue();function C(e){if(M.value)q.push(`/details/${e.publicKey.toString()}`);else{if(D().escrow_selected==e){y().showRightDrawer=!1,D().escrow_selected=void 0;return}D().escrow_selected=e,R.includes("exchange")&&(y().showRightDrawer=!0)}}const i=f(()=>D().escrows_cards);return(e,S)=>Object.entries(i.value).every(([k,h])=>h.length==0)?(g(),U("div",St,xt)):(g(),U("div",Ze,[(g(!0),U(ce,null,ue(Object.entries(i.value).filter(([k,h])=>h.length>0),([k,h])=>(g(),p(I,{square:"",flat:"",key:k},{default:s(()=>[o(K,null,{header:s(()=>[o(j,{avatar:""},{default:s(()=>[r("div",Ve,[o(J,{color:"transparent",outline:"",class:Ye(["col text-center q-ma-sm",`bg-${u(D)().filter_cards.by}`])},{default:s(()=>{var m;return[r("div",Ke,[r("div",Ge,b(u(D)().filter_cards.by.toUpperCase()),1),o(Oe,{vertical:""}),r("div",et,[o(H,{class:"",size:"sm",src:u(A)((m=u(y)().token_list.find(v=>v.symbol==k))==null?void 0:m.address)},null,8,["src"]),r("div",tt,b(k),1)])])]}),_:2},1032,["class"])])]),_:2},1024),o(j,null,{default:s(()=>[r("div",lt,b(u(y)().token_list.find(m=>m.symbol==k).name),1)]),_:2},1024),o(j,{side:""},{default:s(()=>[r("div",at,[o(Q,{name:"tag"}),r("div",null,b(h.length),1)])]),_:2},1024)]),default:s(()=>[o(I,null,{default:s(()=>[h?(g(),p(re,{key:0},{default:s(()=>[(g(!0),U(ce,null,ue(Object.entries(T(h,"3")),([m,v])=>(g(),p(I,{class:"q-mb-sm",bordered:"",square:"",flat:"",key:m},{default:s(()=>[o(K,null,{header:s(()=>[o(j,{avatar:""},{default:s(()=>[r("div",ot,[o(J,{color:"transparent",outline:"",class:"col text-center q-ma-sm bg-sell"},{default:s(()=>[r("div",st,[o(H,{class:"",size:"sm",src:u(A)(v[0].account.requestToken.toString())},null,8,["src"]),r("div",rt,b(u(y)().token_list.find(l=>l.address==v[0].account.requestToken.toString()).symbol),1)])]),_:2},1024),o(Q,{size:"md",name:"chevron_right"}),o(J,{color:"transparent",outline:"",class:"col text-center q-ma-sm bg-buy"},{default:s(()=>[r("div",it,[o(H,{class:"",size:"sm",src:u(A)(v[0].account.depositToken.toString())},null,8,["src"]),r("div",nt,b(u(y)().token_list.find(l=>l.address==v[0].account.depositToken.toString()).symbol),1)])]),_:2},1024)])]),_:2},1024),M.value?B("",!0):(g(),p(j,{key:0},{default:s(()=>[r("div",ct,[r("div",ut,b(u(y)().token_list.find(l=>l.symbol==m.split("-")[1]).name),1),o(Q,{size:"md",name:"chevron_right"}),r("div",dt,b(u(y)().token_list.find(l=>l.symbol==m.split("-")[0]).name),1)])]),_:2},1024)),o(j,{side:""},{default:s(()=>[r("div",vt,[o(Q,{name:"tag"}),r("div",null,b(v.length),1)])]),_:2},1024)]),default:s(()=>[o(I,null,{default:s(()=>[v?(g(),p(re,{key:0},{default:s(()=>[o(Te,{flat:"","hide-bottom":"","rows-per-page-options":[0],rows:v,columns:[{name:"options",align:"left",label:"Options",field:"account",sortable:!0},{name:"escrow",label:"Escrow",align:"left",field:"publicKey",format:(l,d)=>u(ve)(`${l}`),sortable:!0},{name:"maker",align:"left",label:"Maker",field:"account",format:(l,d)=>u(ve)(`${l.maker}`),sortable:!0},{name:"price",label:"Price per Unit",field:"account",format:(l,d)=>`${l.price.toString()}`,sortable:!0}]},{"body-cell":s(l=>[l.col.name=="price"?(g(),p(Z,{key:0,props:l,onClick:d=>C(l.row)},{default:s(()=>{var d,z;return[r("div",ht,[r("div",ft,[r("div",null,b(parseFloat(l.value).toFixed(5)),1),o(H,{class:"",size:"xs",src:u(A)((d=u(y)().token_list.find(w=>w.symbol==m.split("-")[1]))==null?void 0:d.address)},null,8,["src"])]),r("div",mt,[r("div",null,b((1/parseFloat(l.value)).toFixed(5)),1),o(H,{class:"",size:"xs",src:u(A)((z=u(y)().token_list.find(w=>w.symbol==m.split("-")[0]))==null?void 0:z.address)},null,8,["src"])])])]}),_:2},1032,["props","onClick"])):l.col.name=="options"?(g(),p(Z,{key:1,onClick:d=>C(l.row),props:l},{default:s(()=>{var d;return[r("div",_t,[r("div",bt,[o(Q,{size:"sm",name:"balance",color:l.row.account.allowPartialFill?"purple":"grey"},{default:s(()=>[o(X,null,{default:s(()=>[Y("Partial fill "+b(l.row.account.allowPartialFill?"":"NOT ")+" allowed",1)]),_:2},1024)]),_:2},1032,["color"])]),r("div",gt,[o(Q,{size:"sm",name:"timer",color:l.row.account.expireTimestamp>0?"orange":"grey"},{default:s(()=>[o(X,null,{default:s(()=>[Y("Will "+b(l.row.account.expireTimestamp>0?"":"NOT ")+" expire",1)]),_:2},1024)]),_:2},1032,["color"])]),r("div",yt,[o(Q,{size:"sm",name:"design_services",color:l.row.account.maker.toString()==((d=u(de)().publicKey.value)==null?void 0:d.toString())?"orange":"grey"},{default:s(()=>[o(X,null,{default:s(()=>{var z;return[Y("You are "+b(l.row.account.maker.toString()===((z=u(de)().publicKey.value)==null?void 0:z.toString())?"":"NOT ")+" the creator",1)]}),_:2},1024)]),_:2},1032,["color"])]),r("div",zt,[o($e,{size:"xs",escrow:l.row},null,8,["escrow"])])])]}),_:2},1032,["onClick","props"])):(g(),p(Z,{key:2,props:l,onClick:d=>C(l.row)},{default:s(()=>[Y(b(l.value),1)]),_:2},1032,["props","onClick"]))]),_:2},1032,["rows","columns"])]),_:2},1024)):B("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)):B("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]))}});const jt=_e({__name:"ExchangePage2",setup(c){We(()=>{y().showLeftDrawer=!0,y().showRightDrawer=!1});const M=_({right:"2px",borderRadius:"9px",backgroundColor:"none",width:"8px",opacity:.2}),R=_({right:"0px",borderRadius:"0px",backgroundColor:"#888",width:"5px",opacity:1});return(T,q)=>(g(),p(Je,{class:"row"},{default:s(()=>[o(Xe,{"thumb-style":R.value,"bar-style":M.value,visible:"",class:"col"},{default:s(()=>[u(be)().screen.lt.md?(g(),p(Pe,{key:0,bordered:"",class:"bg-dark"},{default:s(()=>[o(K,{"expand-separator":"",icon:"search",label:"Filters"},{default:s(()=>[o(De)]),_:1})]),_:1})):B("",!0),u(y)().is_init?(g(),p(kt,{key:1})):B("",!0)]),_:1},8,["thumb-style","bar-style"])]),_:1}))}});export{jt as default};
