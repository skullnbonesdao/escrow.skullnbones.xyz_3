import{X as I,I as U,K as T,D as B,L as h,Y as p,C as L,k as M,M as W}from"./QTable.de967913.js";import{u as Y,a as X,b as G,c as A}from"./QTabs.964c83dc.js";import{u as Q,t as C,y as S,z,H as J,ab as w,bC as F,a4 as x,bI as H,ak as d,$ as a,v as j,bX as P,aj as l,w as Z,a5 as R,a6 as r,aa as o,a7 as t,ap as q,a8 as y,bK as $,a9 as E,ai as ee}from"./index.07fc57d4.js";var O=Q({name:"QTab",props:Y,emits:X,setup(s,{slots:n,emit:c}){const{renderTab:i}=G(s,n,c);return()=>i("div")}}),g=Q({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(s,{slots:n}){const c=J(),i=C(()=>"q-td"+(s.autoWidth===!0?" q-table--col-auto-width":"")+(s.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(s.props===void 0)return S("td",{class:i.value},z(n.default));const f=c.vnode.key,_=(s.props.colsMap!==void 0?s.props.colsMap[f]:null)||s.props.col;if(_===void 0)return;const{row:m}=s.props;return S("td",{class:i.value+_.__tdClass(m),style:_.__tdStyle(m)},z(n.default))}}}),te=Q({name:"QTr",props:{props:Object,noHover:Boolean},setup(s,{slots:n}){const c=C(()=>"q-tr"+(s.props===void 0||s.props.header===!0?"":" "+s.props.__trClass)+(s.noHover===!0?" q-tr--no-hover":""));return()=>S("tr",{class:c.value},z(n.default))}});function v(s){var n;return s?((n=w().token_list.find(c=>c.address==s))==null?void 0:n.logoURI)??"unknown.png":"unknown.png"}function V(s){var n;return(n=w().token_list.find(c=>c.address==s))==null?void 0:n.name}const se={class:"text-body1"},D=F({__name:"FormatTokenNumber",props:["mint","amount"],setup(s){const n=s,c=C(()=>{var i;return{debug:!1,masked:!1,prefix:"",suffix:"",thousands:",",decimal:".",precision:((i=w().token_list.find(f=>f.address==n.mint))==null?void 0:i.decimals)??0,disableNegative:!0,disabled:!1,min:null,max:null,allowBlank:!1,minimumNumberOfCharacters:0,modelModifiers:{number:!1},shouldRound:!0,focusOnRight:!1}});return(i,f)=>(x(),H("p",se,d(a(I)(n.amount,c.value)),1))}}),oe={class:"row full-width items-center q-gutter-x-md"},ae=o("div",{class:"text-subtitle1"},"Sort by:",-1),ne={class:"q-gutter-y-xs"},re={class:"row items-center justify-around no-wrap"},ce={class:"q-mx-sm text-subtitle1"},le={class:"row items-center justify-around no-wrap"},ie={class:"q-mx-sm text-subtitle1"},ue={class:"q-gutter-y-xs"},de={class:"row items-center justify-end q-gutter-x-sm no-wrap"},_e={class:"row items-center justify-end q-gutter-x-sm no-wrap"},me={class:"q-gutter-y-xs"},we={class:"row items-center justify-end q-gutter-x-sm no-wrap"},fe={class:"text-subtitle2"},be={class:"row items-center justify-end q-gutter-x-sm no-wrap"},ke={class:"text-subtitle2"},he={class:"row items-center",style:{width:"100px"}},ve={class:"col"},ge={class:"col"},pe={class:"col"},ye={class:"col"},xe={class:"row items-center justify-around q-gutter-sm"},Te={key:1,class:"col text-center"},K=9,Qe=F({__name:"EscrowTable",setup(s){j("buy_name");const n=P().path,c=[{name:"tokens",label:"Tokens",align:"center"},{name:"size",label:"Size",align:"center"},{name:"ppu",label:"Price per Unit",align:"center"},{name:"states",label:"",align:"center"},{name:"actions",label:"",align:"center"}],i=j(l().escrows);Z(()=>l().escrow_selected,()=>i.value=l().escrows_filtered);function f(_){if(l().escrow_selected==_){w().showRightDrawer=!1,l().escrow_selected=void 0;return}l().escrow_selected=_,n.includes("exchange")&&(w().showRightDrawer=!0)}return(_,m)=>{var N;return(N=a(l)().escrows_filtered)!=null&&N.length?(x(),R(U,{key:0,class:"full-width",flat:"",square:"",bordered:"",rows:a(l)().escrows_filtered,columns:c,"row-key":"name","hide-bottom":"",pagination:{rowsPerPage:0}},{top:r(()=>[o("div",oe,[t(T,{class:"col"}),ae,o("div",null,[t(A,{modelValue:a(l)().sort_direction,"onUpdate:modelValue":m[0]||(m[0]=e=>a(l)().sort_direction=e),dense:"",align:"justify",breakpoint:0},{default:r(()=>[t(O,{name:"buy_ppu","no-caps":"",label:"Buy Price"}),t(O,{name:"sell_ppu","no-caps":"",label:"Sell Price"})]),_:1},8,["modelValue"])])])]),body:r(e=>[t(te,{props:e,onClick:u=>f(e.row)},{default:r(()=>[t(g,{key:"tokens",props:e},{default:r(()=>[o("div",ne,[o("div",re,[t(B,{label:"SELL",color:"red",outline:""}),t(T),o("div",ce,d(a(V)(e.row.account.requestToken)),1),t(h,{size:"sm",src:a(v)(e.row.account.requestToken)},null,8,["src"])]),o("div",le,[t(B,{label:"BUY",color:"green",outline:""}),t(T),o("div",ie,d(a(V)(e.row.account.depositToken)),1),t(h,{size:"sm",src:a(v)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(g,{key:"size",props:e},{default:r(()=>{var u,b;return[o("div",ue,[o("div",de,[t(D,{mint:e.row.account.requestToken,amount:e.row.account.tokensDepositRemaining.toNumber()*e.row.account.price*10**-((u=a(w)().token_list.find(k=>k.address==e.row.account.depositToken))==null?void 0:u.decimals)},null,8,["mint","amount"]),t(h,{size:"sm",src:a(v)(e.row.account.requestToken)},null,8,["src"])]),o("div",_e,[t(D,{mint:e.row.account.depositToken,amount:e.row.account.tokensDepositRemaining.toNumber()*10**-((b=a(w)().token_list.find(k=>k.address==e.row.account.depositToken))==null?void 0:b.decimals)},null,8,["mint","amount"]),t(h,{size:"sm",src:a(v)(e.row.account.depositToken)},null,8,["src"])])])]}),_:2},1032,["props"]),t(g,{key:"ppu",props:e},{default:r(()=>[o("div",me,[o("div",we,[o("div",fe,d(e.row.account.price.toFixed(K)),1),t(h,{size:"sm",src:a(v)(e.row.account.requestToken)},null,8,["src"])]),o("div",be,[o("div",ke,d((1/e.row.account.price).toFixed(K)),1),t(h,{size:"sm",src:a(v)(e.row.account.depositToken)},null,8,["src"])])])]),_:2},1032,["props"]),t(g,{key:"states",props:e},{default:r(()=>{var u;return[o("div",he,[o("div",ve,[t(q,{size:"sm",name:"balance",color:e.row.account.allowPartialFill?"purple":"grey"},{default:r(()=>[t(p,null,{default:r(()=>[y("Partial fill "+d(e.row.account.allowPartialFill?"":"NOT ")+" allowed",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",ge,[t(q,{size:"sm",name:"timer",color:e.row.account.expireTimestamp>0?"orange":"grey"},{default:r(()=>[t(p,null,{default:r(()=>[y("Will "+d(e.row.account.expireTimestamp>0?"":"NOT ")+" expire",1)]),_:2},1024)]),_:2},1032,["color"])]),o("div",pe,[t(q,{size:"sm",name:"design_services",color:e.row.account.maker.toString()==((u=a($)().publicKey.value)==null?void 0:u.toString())?"orange":"grey"},{default:r(()=>[t(p,null,{default:r(()=>{var b;return[y("You are "+d(e.row.account.maker.toString()===((b=a($)().publicKey.value)==null?void 0:b.toString())?"":"NOT ")+" the creator",1)]}),_:2},1024)]),_:2},1032,["color"])]),o("div",ye,[t(L,{size:"xs",escrow:e.row},null,8,["escrow"])])])]}),_:2},1032,["props"]),t(g,{key:"actions",props:e},{default:r(()=>{var u;return[o("div",xe,[t(E,{to:"/details/"+((u=a(l)().escrow_selected)==null?void 0:u.publicKey.toString()),dense:"",color:"secondary",icon:"aspect_ratio"},{default:r(()=>[t(p,null,{default:r(()=>[y("Expand offer")]),_:1})]),_:1},8,["to"]),t(E,{dense:"",onClick:m[1]||(m[1]=b=>{var k;return a(M)("https://escrow.skullnbones.xyz/#/details/"+((k=a(l)().escrow_selected)==null?void 0:k.publicKey.toString()))}),color:"secondary",icon:"share"}),a(P)().path.includes("manage")?(x(),R(W,{key:0})):ee("",!0)])]}),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows"])):(x(),H("h5",Te,"No Escrows found"))}}});export{O as Q,Qe as _};
